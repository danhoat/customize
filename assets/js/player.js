var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.arrayIteratorImpl=function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}},$jscomp.arrayIterator=function(t){return{next:$jscomp.arrayIteratorImpl(t)}},$jscomp.makeIterator=function(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):$jscomp.arrayIterator(t)},function(t){var e=function(){};e.isEmpty=function(t){return 0==t.replace(/^\s+|\s+$/g,"").length},e.strip=function(t){return t.replace(/^\s+|\s+$/g,"")},e.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},e.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|sony|BlackBerry/i.test(navigator.userAgent)},e.isChrome=function(){return!(!t.chrome||!t.chrome.webstore&&!t.chrome.runtime)},e.isSafari=function(){return 0<Object.prototype.toString.call(t.HTMLElement).indexOf("Constructor")},e.isIE=function(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent,a=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=a.exec(e)&&(t=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(e=navigator.userAgent,null!=(a=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/).exec(e)&&(t=parseFloat(RegExp.$1)));return-1!=t},e.isIOS=function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)},e.isAndroid=function(){return-1<navigator.userAgent.indexOf("Android")},e.hasDownloadSupport=function(){return"download"in document.createElement("a")},e.qualifyURL=function(t){var e=document.createElement("a");return e.href=t,e.href},e.relativePath=function(t){return/^(?:[a-z]+:)?\/\//i.test(t)},e.closestNumber=function(t,e){return t.reduce(function(t,a){return Math.abs(a-e)<Math.abs(t-e)?a:t})},e.hasLocalStorage=function(){try{return"localStorage"in t&&null!==t.localStorage}catch(t){return!1}},e.volumeCanBeSet=function(){var t=document.createElement("audio");return!!t&&(t.volume=0,0==t.volume)},e.randomiseArray=function(t){var e,a=[],i=[];for(e=0;e<t;e++)a[e]=e;for(e=0;e<t;e++){var n=Math.round(Math.random()*(a.length-1));i[e]=a[n],a.splice(n,1)}return i},e.valueLimit=function(t,e,a){return t<e?e:t>a?a:t},e.sortArray=function(t,e){var a,i=t.length,n=[];for(a=0;a<i;a++)n[a]=t[e[a]];return n},e.sortNumericArray=function(t){t.sort(function(t,e){return t-e})},e.shuffleArray=function(t){for(var e=t.length-1;0<e;e--){var a=Math.floor(Math.random()*(e+1)),i=$jscomp.makeIterator([t[a],t[e]]);t[e]=i.next().value,t[a]=i.next().value}return t},e.keysrt=function(t,e,a){var i=1;return a&&(i=-1),t.sort(function(t,a){var n=t[e],o=a[e];return i*(n<o?-1:n>o?1:0)})},e.keysrt2=function(t,e,a,i){var n=1;return i&&(n=-1),t.sort(function(t,i){var o=t[e][a],r=i[e][a];return n*(o<r?-1:o>r?1:0)})},e.keysrt3=function(t,e,a){return t.sort(function(t,i){var n=i[a];return e.indexOf(t[a])>e.indexOf(n)?1:-1}),t},e.parseXML=function(e){if(t.ActiveXObject&&t.GetObject){var a=new ActiveXObject("Microsoft.XMLDOM");return a.loadXML(e),a}if(t.DOMParser)return(new DOMParser).parseFromString(e,"text/xml");throw Error("No XML parser available")},e.formatTime=function(t){t=parseInt(t,10);var e=Math.floor(t/3600),a=Math.floor((t-3600*e)/60);return t=t-3600*e-60*a,0<e?(10>e&&(e="0"+e),10>a&&(a="0"+a),10>t&&(t="0"+t),e+":"+a+":"+t):(10>a&&(a="0"+a),10>t&&(t="0"+t),a+":"+t)},e.formatTimeWithMiliseconds=function(t){var e=parseInt(t.split(":")[0]),a=parseInt(t.split(":")[1]),i=parseInt(t.split(":")[2]);return t=parseInt(t.split(",")[1]||t.split(".")[1]),Math.round(100*(3600*e+60*a+i+t/1e3))/100},e.toSeconds=function(t){return t=t.split(/[\.:,]+/),Number(3600*+t[0]+60*+t[1]+ +t[2])},e.formatNumber=function(t){return 9>t?"0"+(t+1):t+1},e.nFormatter=function(t,e){var a,i=[{value:1e18,symbol:"E"},{value:1e15,symbol:"P"},{value:1e12,symbol:"T"},{value:1e9,symbol:"G"},{value:1e6,symbol:"M"},{value:1e3,symbol:"k"}],n=/\.0+$|(\.[0-9]*[1-9])0+$/;for(a=0;a<i.length;a++)if(t>=i[a].value)return(t/i[a].value).toFixed(e).replace(n,"$1")+i[a].symbol;return t.toFixed(e).replace(n,"$1")},e.hmsToSecondsOnly=function(t){t=t.split(":");for(var e=0,a=1;0<t.length;)e+=a*parseInt(t.pop()),a*=60;return e},e.canPlayMp3=function(){var t=document.createElement("audio");return!(!t.canPlayType||!t.canPlayType("audio/mpeg;").replace(/no/,""))},e.canPlayWav=function(){var t=document.createElement("audio");return!(!t.canPlayType||!t.canPlayType("audio/wav;").replace(/no/,""))},e.canPlayAac=function(){var t=document.createElement("audio");return!(!t.canPlayType||!t.canPlayType("audio/aac;").replace(/no/,""))},e.canPlayOgg=function(){var t=document.createElement("audio");return!(!t.canPlayType||!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""))},e.canPlayFlac=function(){var t=document.createElement("audio");return!(!t.canPlayType||!t.canPlayType("audio/flac;").replace(/no/,""))},e.hasCanvas=function(){return!!document.createElement("canvas")},e.getElementOffsetTop=function(e){e=e.getBoundingClientRect();var a=document.body,i=document.documentElement;return Math.round(e.bottom-100+(t.pageYOffset||i.scrollTop||a.scrollTop)-(i.clientTop||a.clientTop||0))},e.getScrollTop=function(e){return e=document.documentElement,(t.pageYOffset||e.scrollTop)-(e.clientTop||0)},e.getEvents=function(){var e={};return"ontouchstart"in t?(e.downEvent="touchstart mousedown",e.moveEvent="touchmove mousemove",e.upEvent="touchend mouseup"):t.PointerEvent?(e.downEvent="pointerdown",e.moveEvent="pointermove",e.upEvent="pointerup"):(e.downEvent="mousedown",e.moveEvent="mousemove",e.upEvent="mouseup"),e},e.getUrlParameter=function(e){var a={};return t.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,e,i){a[e]=i}),e?a[e]:a},t.HAPUtils=e}(window),function(t,e){t.HAPPlaylistManager=function(t){function a(){u=HAPUtils.randomiseArray(i)}var i,n,o,r=this,l=t.loop,s=t.random,d=!1,p=-1,c=!1,u=[],h=!1;this.setCounter=function(t,n){if(void 0===n&&(n=!0),p=n?p+parseInt(t,10):parseInt(t,10),isNaN(p))alert("HAPPlaylistManager message: No active media, counter = "+p);else if(d=!1,"playlist"==l||"single"==l){if(s)if(p>i-1){if(p=u[i-1],a(),u[0]==p){var o=u.splice(0,1);u.push(o)}p=0}else 0>p&&(p=u[0],a(),u[i-1]==p&&(o=u.splice(i-1,1),u.unshift(o)),p=i-1);else p>i-1?p=0:0>p&&(p=i-1);e(r).trigger("HAPPlaylistManager.COUNTER_READY",r.getCounter())}else"off"==l&&(p>i-1?(p=i-1,d=!0):0>p&&(p=0,d=!0),d?e(r).trigger("HAPPlaylistManager.PLAYLIST_END"):e(r).trigger("HAPPlaylistManager.COUNTER_READY",r.getCounter()))},this.getCounter=function(){return s?h?p:u[p]:p},this.advanceHandler=function(t){h=!1,c?(c=!1,o+t>i-1?(p=i-1,e(r).trigger("HAPPlaylistManager.COUNTER_READY",r.getCounter())):0>o+t?(p=0,e(r).trigger("HAPPlaylistManager.COUNTER_READY",r.getCounter())):r.setCounter(o+t,!1)):r.setCounter(t)},this.processPlaylistRequest=function(t){h=!1,s&&(h=!0,n=t,c||(o=p,c=!0)),r.setCounter(t,!1)},this.setPlaylistItems=function(t,e){void 0===e&&(e=!0),e&&(p=-1),i=t,s&&a()},this.reSetCounter=function(t){void 0===t?p=-1:(t=parseInt(t,10),i?(t>i-1?t=i-1:0>t&&(t=0),p=t):p=-1)},this.setRandom=function(t){if((s=t)&&a(),s){var e=u.length;for(t=0;t<e;t++)if(u[t]==p){if(0==t)break;t=u.splice(t,1),u.unshift(parseInt(t,10));break}p=0}else c?(p=n,c=!1):p=u[p]},this.setLooping=function(t){l=t},this.getPosition=function(t){return u.indexOf(t)}}}(window,jQuery),function(t,e){t.HAPPlaybackRateSlider=function(a){function i(t){p?t=1-(t=Math.max(0,Math.min(1,(t.pageY-h.offset().top)/g))):t=Math.max(0,Math.min(1,(t.pageX-h.offset().left)/g)),r.setValue(t)}function n(t){var e=p?t.pageY-h.offset().top:t.pageX-h.offset().left;if(0>e?e=0:e>g&&(e=g),e=Math.max(0,Math.min(1,e/g)),!HAPUtils.isNumber(e))return!1;p&&(e=1-e),e=v+(b-v)*e,e=Math.round(10*e)/10,u.text(e),e=d[0].getBoundingClientRect();var a=m[0].getBoundingClientRect();if(p){var i=parseInt(a.left-e.left-u.outerWidth()/2+m.outerWidth()/2);(t=parseInt(t.pageY-s.scrollTop()-e.top-u.outerHeight()-10))<a.top-e.top-u.outerHeight()-10?t=a.top-e.top-u.outerHeight()-10:t>a.top-e.top+m.outerHeight()-u.outerHeight()&&(t=a.top-e.top+m.outerHeight()-u.outerHeight())}else i=parseInt(t.pageX-s.scrollLeft()-e.left-u.outerWidth()/2),t=parseInt(a.top-e.top-u.outerHeight()),i<a.left-e.left?i=a.left-e.left:i>a.left-e.left+m.outerWidth()-u.outerWidth()&&(i=a.left-e.left+m.outerWidth()-u.outerWidth());u.css({left:i+"px",top:t+"px"}).show()}var o,r=this,l=e(document),s=e(t),d=a.wrapper,p=a.isVertical,c=p?"height":"width",u=a.tooltip,h=a.sliderBg,f=a.sliderLevel,m=a.seekbar,g=p?h.height():h.width(),y=HAPUtils.getEvents(),v=a.settings.playbackRateMin,b=a.settings.playbackRateMax;if(m.on(y.downEvent,function(t){return function(t){if(!o){if("touchstart"==t.type){if(!((t=t.originalEvent.touches)&&0<t.length))return!1}else t.preventDefault();o=!0,l.on(y.moveEvent,function(t){t:{if("touchmove"==t.type){if(t.originalEvent.touches&&t.originalEvent.touches.length)var e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;e=t.originalEvent.changedTouches}if(1<e.length)break t;e=e[0]}else e=t;t.preventDefault(),i(e),n(e)}}).on(y.upEvent,function(t){t:if(o){if(o=!1,l.off(y.moveEvent).off(y.upEvent),"touchend"==t.type){if(t.originalEvent.touches&&t.originalEvent.touches.length)var e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;e=t.originalEvent.changedTouches}if(1<e.length)break t;e=e[0]}else e=t;t.preventDefault(),i(e),u.hide()}})}}(t),!1}),this.setValue=function(t){HAPUtils.isNumber(g)||(g=p?h.height():h.width()),f.css(c,t*g+"px"),t=v+(b-v)*t,t=Math.round(10*t)/10,e(r).trigger("HAPPlaybackRateSlider.RANGE_CHANGE",{value:t})},this.setVisual=function(t){t=(t-v)/(b-v),HAPUtils.isNumber(g)||(g=p?h.height():h.width()),f.css(c,t*g+"px")},!HAPUtils.isMobile()){var P=function(){m.off(y.moveEvent,n).off("mouseout",P),l.off("mouseout",P),u.hide()};m.on("mouseover",function(){o||(m.on(y.moveEvent,n).on("mouseout",P),l.on("mouseout",P))})}}}(window,jQuery),function(t,e){t.HAPRangeSlider=function(a){function i(t){if(!r){if("touchstart"==t.type){if(!((t=t.originalEvent.touches)&&0<t.length))return!1}else t.preventDefault();r=!0,o.on(s.moveEvent,function(t){t:{if("touchmove"==t.type){if(t.originalEvent.touches&&t.originalEvent.touches.length)var a=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;a=t.originalEvent.changedTouches}if(1<a.length)break t;a=a[0]}else a=t;t.preventDefault(),e(n).trigger("HAPRangeSlider.RANGE_CHANGE",{point:a,elem:l,event:a})}}).on(s.upEvent,function(t){t:if(r){if(r=!1,o.off(s.moveEvent).off(s.upEvent),"touchend"==t.type){if(t.originalEvent.touches&&t.originalEvent.touches.length)var a=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;a=t.originalEvent.changedTouches}if(1<a.length)break t;a=a[0]}else a=t;t.preventDefault(),e(n).trigger("HAPRangeSlider.RANGE_CHANGE",{point:a,elem:l})}})}return!1}var n=this,o=e(document);e(t);var r,l,s=HAPUtils.getEvents(),d=a.range_handle_a,p=a.range_handle_b;d.on(s.downEvent,function(t){return l=e(this).css("z-index",1),p.css("z-index",0),i(t),!1}),p.on(s.downEvent,function(t){return l=e(this).css("z-index",1),d.css("z-index",0),i(t),!1}),this.isDrag=function(){return r}}}(window,jQuery);var hapjq=jQuery;!function(t){t.fn.hap=function(e){function a(){if(-1!=(Na=Da.mp3||Da.path).indexOf("ebsfm:")&&(Na=atob(Na.substr(6))),ia)na&&(r=0,e.resumeTime?r=resumeTime:Da.start&&(r=Da.start),Gt?aa.loadVideoById({videoId:Na,startSeconds:r,endSeconds:Da.end,suggestedQuality:Da.quality}):aa.cueVideoById({videoId:Na,startSeconds:r,endSeconds:Da.end,suggestedQuality:Da.quality}));else{if(0==Ct.length)return void alert("Using Youtube requires player to have thumbnail image in player where Youtube player will be placed. Please use demo which has thumbnail in player! hap-player-thumb element");ea=t('<div class="hap-youtube-holder"/>').appendTo(Ct);var a="ytplayer"+Math.floor(16777215*Math.random()),r="https:"==window.location.protocol?"https:":"http:",l=window.location.href.split("/"),s="&origin="+(l=l[0]+"//"+l[2]);r=r+"//www.youtube-nocookie.com/embed/"+Na+"?enablejsapi=1&controls=0&rel=0&showinfo=0&playsinline=1&modestbranding=1&wmode=transparent&iv_load_policy=3&cc_load_policy=0",/^http/.test(l)&&(r+=s),e.resumeTime?(r+="&start="+e.resumeTime,delete e.resumeTime):Da.start&&(r+="&start="+Da.start),Da.end&&(r+="&end="+Da.end),Ze=t("<iframe/>",{id:a,frameborder:0,src:r,width:"100%",height:"100%",webkitAllowFullScreen:!1,mozallowfullscreen:!1,allowFullScreen:!1,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"}).addClass("hap-media"),ea.show().prepend(Ze),window.YT||((r=document.createElement("script")).src="https://www.youtube.com/iframe_api",(l=document.getElementsByTagName("script")[0]).parentNode.insertBefore(r,l));var d=setInterval(function(){window.YT&&window.YT.Player&&(d&&clearInterval(d),aa=new YT.Player(a,{events:{onReady:i,onStateChange:n,onError:o}}))},100);ia=!0}ea.show()}function i(t){na=!0,e.forceYoutubeChromeless&&Ze.addClass("hap-yt-clean"),sa&&Gt&&aa.playVideo()}function n(a){ea.is(":visible")&&(console.log(a),-1!=a.data&&(0==a.data?Wi&&Di&&!Ri&&!zi.isDrag()?(Ri=!0,aa.seekTo(Hi),aa.playVideo()):ra||(ra=!0,B()):1==a.data?(oa||(ra=!1,aa.setPlaybackRate(Da.playbackRate),Fi&&Fi.setVisual(Da.playbackRate),la||(la=t('<div class="hap-iframe-blocker"></div>').css("display","block").appendTo(ea)),sa=Gt=oa=!0,e.hideYoutubeAfterStart&&ea.css("opacity",0)),Wi&&Di&&setTimeout(function(){clearTimeout(this),Ri=!1},1e3),Ra&&clearInterval(Ra),Ra=setInterval(R,ci),L()):2==a.data&&j()))}function o(a){t(se).trigger("soundError",{instance:se,instanceName:e.instanceName,media:Da,error:a})}function r(){navigator.mediaSession.metadata=new MediaMetadata({title:Da.title,artist:Da.artist||"",album:Da.album||"",artwork:[{src:Da.thumb||""}]})}function l(t){var e=ct[0].getBoundingClientRect(),a=t[0].getBoundingClientRect();Ii.text(t.attr("data-tooltip"));var i=parseInt(a.top-e.top-Ii.outerHeight());(t=parseInt(a.left-e.left-Ii.outerWidth()/2+t.outerWidth()/2))+Ii.outerWidth()>ct.width()?t=ct.width()-Ii.outerWidth():0>t&&(t=0),0>i+e.top&&(i=parseInt(a.top-e.top+Ii.outerHeight()+15)),Ii.css({left:t+"px",top:i+"px"}).show()}function s(t,e){if(xi)a=Si.setProgress(t);else{0>(a=t.pageX-At.offset().left)?a=0:a>ja&&(a=ja);var a=Math.max(0,Math.min(1,a/ja))}if(e){if("youtube"==Ha)aa&&na&&aa.seekTo(a*aa.getDuration());else if("audio"==Ha&&ai&&!isNaN(ai.duration)){var i=ai.duration,n=a*i;n>i-2&&(n=i-2);try{ai.currentTime=n}catch(t){}}Ma||It.width(a*ja)}else It.width(a*ja)}function d(t){if(xi)e=Si.trackTooltip(t),a=ct[0].getBoundingClientRect(),i=Ci[0].getBoundingClientRect(),n=parseInt(i.top-a.top-Ii.outerHeight()-20),(t=parseInt(i.left-a.left-Ii.outerWidth()/2+Ci.outerWidth()/2))+Ii.outerWidth()>ct.width()?t=ct.width()-Ii.outerWidth():0>t&&(t=0),0>n+a.top&&(n=parseInt(i.top-a.top+Ii.outerHeight()+20));else{if(e=t.pageX-At.offset().left,!HAPUtils.isNumber(e))return!1;0>e?e=0:e>ja&&(e=ja);var e=Math.max(0,Math.min(1,e/ja)),a=ct[0].getBoundingClientRect(),i=Ci[0].getBoundingClientRect();t=parseInt(t.pageX-pe.scrollLeft()-a.left-Ii.outerWidth()/2);var n=parseInt(i.top-a.top-Ii.outerHeight(),10)-10;t<i.left-a.left?t=i.left-a.left:t>i.left-a.left+Ci.outerWidth()-Ii.outerWidth()&&(t=i.left-a.left+Ci.outerWidth()-Ii.outerWidth()),0>n+a.top&&(n=parseInt(i.top-a.top+Ii.outerHeight()+15))}if(Ii.css({left:t+"px",top:n+"px"}),!HAPUtils.isNumber(e))return!1;if("youtube"==Ha){if(aa&&na){var o=aa.getDuration();n=e*o}}else"audio"==Ha&&ai&&(n=e*(o=ai.duration));HAPUtils.isNumber(o)&&HAPUtils.isNumber(o)&&Ii.html(HAPUtils.formatTime(n)+" / "+HAPUtils.formatTime(o)).show()}function p(){Ba=new HAPVolumeSlider({volume:$t,container:ct,tooltip:Ii}),t(Ba).on("HAPVolumeSlider.VOLUME_CHANGE",function(t,e){"youtube"==Ha?aa&&na&&aa.setVolume(100*e):ai&&(ai.volume=e,ai.muted=0==e)})}function c(t){if(t=Math.max(0,Math.min(1,t/ja)),"youtube"==Ha)var e=aa.getDuration();else"audio"==Ha&&(e=ai.duration);return t*e}function u(a){if(!re||e.disableSongSkip||Qe&&Qe.isAdOn())return!1;if(a=t(a.currentTarget),Gt=ca=!0,V(),he&&Da.adMid&&!Ke&&Qe.forceAdMidAudio(),za){var i=a.closest(".hap-accordion-item").attr("data-id");if(i!=Ga){for(oi=hi[Ga=i].data,di=oi.length,i=0;i<di;i++)oi[i].id=i;Ti.setPlaylistItems(di)}}a=a.closest(".hap-playlist-item").attr("data-id"),Ti.processPlaylistRequest(a),-1<ht.indexOf("hap-art-narrow-light")&&se.togglePlaylist(),t(se).trigger("clickPlaylistItem",{instance:se,instanceName:e.instanceName})}function h(a){if(a.preventDefault(),!re)return!1;t(a.currentTarget).closest(".hap-playlist-item").addClass("hap-playlist-item-selected"),t(se).trigger("overPlaylistItem",{instance:se,instanceName:e.instanceName})}function f(a){if(a.preventDefault(),!re)return!1;(a=t(a.currentTarget).closest(".hap-playlist-item")).hasClass("hap-playlist-item-disabled")||a.removeClass("hap-playlist-item-selected"),t(se).trigger("outPlaylistItem",{instance:se,instanceName:e.instanceName})}function m(a){if(!re)return!1;if((a=t(a.currentTarget)).hasClass("hap-playlist-toggle")||a.hasClass("hap-playlist-close"))se.togglePlaylist();else if(a.hasClass("hap-skip-backward"))a=a.attr("data-skip-time")?parseInt(a.attr("data-skip-time"),10):seekTime,se.seekBackward(a);else if(a.hasClass("hap-skip-forward"))a=a.attr("data-skip-time")?parseInt(a.attr("data-skip-time"),10):seekTime,se.seekForward(a);else if(a.hasClass("hap-prev-toggle")){if(he&&Da.adMid&&!Ke&&Qe.forceAdMidAudio(),e.disableSongSkip||Qe&&Qe.isAdOn())return!1;se.previousMedia()}else if(a.hasClass("hap-playback-toggle"))he&&Da.adMid&&!Ke&&Qe.forceAdMidAudio(),se.togglePlayback();else if(a.hasClass("hap-next-toggle")){if(he&&Da.adMid&&!Ke&&Qe.forceAdMidAudio(),e.disableSongSkip||Qe&&Qe.isAdOn())return!1;se.nextMedia()}else if(a.hasClass("hap-range-toggle"))se.toggleRange();else if(a.hasClass("hap-playback-rate-toggle")||a.hasClass("hap-playback-rate-close"))_t.hide(),Et.toggle(),Ii.hide(),Et.is(":visible")?Bt.addClass("hap-contr-btn-hover"):Bt.removeClass("hap-contr-btn-hover"),qt.removeClass("hap-contr-btn-hover");else if(a.hasClass("hap-loop-toggle"))Rt.find(".hap-btn").hide(),++Ka>Qa.length-1&&(Ka=0),e.loopState=Qa[Ka],Rt.find(".hap-btn-loop-"+e.loopState).show(),Ti.setLooping(e.loopState),l(Rt.find(".hap-btn:visible"));else if(a.hasClass("hap-random-toggle"))e.randomPlay=!e.randomPlay,Ti.setRandom(e.randomPlay),Lt.find(".hap-btn").hide(),e.randomPlay?Lt.find(".hap-btn-random-on").show():Lt.find(".hap-btn-random-off").show(),l(Lt.find(".hap-btn:visible"));else if(a.hasClass("hap-sort-alpha"))HAPUtils.isEmpty(ie)?ie="title-asc":"title-asc"==ie?ie="title-desc":"title-desc"==ie&&(ie="title-asc"),se.sort(ie),l(wt.find(".hap-btn:visible"));else if(a.hasClass("hap-popup-toggle")){if(e.isPopup)return!1;hapOpenPopup(e,se)}else if(a.hasClass("hap-share-toggle")||a.hasClass("hap-share-close"))_t.toggle(),Et.hide(),Ii.hide(),Bt.removeClass("hap-contr-btn-hover"),_t.is(":visible")?qt.addClass("hap-contr-btn-hover"):qt.removeClass("hap-contr-btn-hover");else if(a.hasClass("hap-share-item")){if(!Ha)return!1;"undefined"==typeof HAPShareManager&&alert("link to sharemanager.js file missing in head tag!"),Je.share(a.attr("data-type").toLowerCase(),Da,se.getCurrentMediaUrl())}}function g(){Ea&&(t(se).trigger("playlistItemEnabled",{instance:se,instanceName:e.instanceName,item:Ea}),Ea.removeClass("hap-playlist-item-selected hap-playlist-item-disabled"),Ea=null)}function y(a){le=!0,Wt.show(),Ca&&z();var i=gt.length?gt.find(a):t(a);if(0==i.length)return alert("Failed playlist selection! Playlist - "+a+" does not exist. Check activePlaylist option in settings!"),le=!1,Wt.hide(),!1;_a=null!=i.attr("data-playlist-id")?i.attr("data-playlist-id"):null,e.activePlaylist=a,t(se).trigger("playlistStartLoad",{instance:se,instanceName:e.instanceName}),i.find(".hap-playlist-options").length&&(Sa=i.find(".hap-playlist-options").clone().prependTo(bt),_e=parseInt(Sa.attr("data-add-more-limit"),10),Ee=parseInt(Sa.attr("data-add-more-num-results"),10),Me=parseInt(Sa.attr("data-add-more-offset"),10),Ne=Sa.attr("data-add-more-sort-order"),Oe=Sa.attr("data-add-more-sort-direction"),He=Sa.attr("data-encrypt-media-paths"),null!=Sa.attr("data-taxonomy")&&(Ue=Sa.attr("data-taxonomy")),null!=Sa.attr("data-category")&&(De=Sa.attr("data-category")),null!=Sa.attr("data-tag")&&(Re=Sa.attr("data-tag")),null!=Sa.attr("data-match")&&(Le=Sa.attr("data-match")),null==Sa.attr("data-thumb-global")||HAPUtils.isEmpty(Sa.attr("data-thumb-global"))||(ua=Sa.attr("data-thumb-global")),null==Sa.attr("data-start")||HAPUtils.isEmpty(Sa.attr("data-start"))||(ha=Number(Sa.attr("data-start"))),null==Sa.attr("data-end")||HAPUtils.isEmpty(Sa.attr("data-end"))||(fa=Number(Sa.attr("data-end"))),null==Sa.attr("data-playback-rate")||HAPUtils.isEmpty(Sa.attr("data-playback-rate"))||(a=Number(Sa.attr("data-playback-rate")),ma=HAPUtils.valueLimit(a,e.playbackRateMin,e.playbackRateMax)),null!=Sa.attr("data-add-more-on-total-scroll")&&(Ce=!0),null!=Sa.attr("data-media-prefix-url")&&(ve=Sa.attr("data-media-prefix-url")),null!=Sa.attr("data-ad-pre")&&(ya=Sa.attr("data-ad-pre").split(",").map(function(t){return t.trim()}),null!=Sa.attr("data-shuffle-ads")&&1<ya.length&&HAPUtils.shuffleArray(ya)),null!=Sa.attr("data-ad-mid")&&(va=Sa.attr("data-ad-mid").split(",").map(function(t){return t.trim()}),null!=Sa.attr("data-shuffle-ads")&&1<va.length&&HAPUtils.shuffleArray(va),null!=Sa.attr("data-ad-mid-interval")&&(ba=Sa.attr("data-ad-mid-interval"))),null!=Sa.attr("data-ad-end")&&(Pa=Sa.attr("data-ad-end").split(",").map(function(t){return t.trim()}),null!=Sa.attr("data-shuffle-ads")&&1<Pa.length&&HAPUtils.shuffleArray(Pa))),i.children(".hap-playlist-item").each(function(){si.push(b(t(this)))}),di=si.length,v()}function v(){if(++ni>di-1)E();else{var a=si[ni],i=a.type;if("soundcloud"==i)if(qe="soundcloud",a.limit?(Fe=a.limit,a.loadMore&&(We=!0)):(Fe=999999999,We=!1),ii=[],window.SC)S(!0,a.path);else{I();var n=setInterval(function(){Ve&&(n&&clearInterval(n),S(!0,a.path))},100)}else"podcast"==i?(qe="podcast",T(a)):"itunes_podcast_music"==i?function(e){if("file:"==window.location.protocol)console.log("Using Podcast requires server connection!");else{var a=e.path.match(/id(\d+)/);(a=a?a[1]:url.match(/\d+/))?t.ajax({url:"https://itunes.apple.com/lookup",data:{id:parseInt(a),entity:"podcast"},type:"GET",dataType:"jsonp"}).done(function(t){e.path=t.results[0].feedUrl,T(e)}).fail(function(t,e,a){console.log("Error processiTunes: "+t.responseText,e,a),v()}):(console.log("No Podcast ID found!"),v())}}(a):"folder"==i?(qe="folder",function(a){if("file:"==window.location.protocol)return console.log("Reading folders requires server connection."),!1;a.limit?(Fe=a.limit,a.loadMore&&(We=!0)):Fe=999999999;var i=a.path.replace(/\/\//g,"/"),n=e.sourcePath+"includes/folder_parser.php";i={dir:i};var o=Fe;je=[],a.id3?(Se=Ie=li.length-1,ze=!0):ze=!1,t.ajax({type:"GET",url:n,data:i,dataType:"json"}).done(function(i){var n,r=i.length;for(a.sort&&("filename-asc"==a.sort?HAPUtils.keysrt(i,"filename"):"filename-desc"==a.sort?HAPUtils.keysrt(i,"filename",!0):"date-asc"==a.sort?HAPUtils.keysrt(i,"filemtime"):"date-desc"==a.sort&&HAPUtils.keysrt(i,"filemtime",!0)),n=0;n<r;n++){var l=i[n],s=t.extend(!0,{},a);if(s.type="audio",e.WP_CONTENT_URL){var d=e.WP_CONTENT_URL.split("/");d=d[d.length-1],d=l.dirname.indexOf(d)+d.length,d=e.WP_CONTENT_URL+"/"+l.dirname.substr(d)+"/"+l.basename}else d=l.fullpath;s[l.extension]=d,e.createDownloadIconsInPlaylist&&!s.download&&(s.download=d),e.createLinkIconsInPlaylist&&!s.link&&(s.link=d),s.title||(s.title=l.filename),n<o?(li.push(s),Ie++):je.push(s)}0==je.length&&(We=!1,je=null),a.id3?("undefined"==typeof jsmediatags&&console.log("Link to jsmediatags.js missing in head tag!"),k()):v()}).fail(function(t,e,a){console.log("Error processFolder: "+t.responseText,e,a),v()})}(a)):"folder_accordion"==i?(za=!0,function(a){if("file:"==window.location.protocol)return console.log("Reading folders requires server connection."),!1;var i=a.path.replace(/\/\//g,"/");t.ajax({type:"GET",url:e.sourcePath+"includes/folder_accordion.php",data:{dir:i},dataType:"json"}).done(function(t){var i,n,o=t.length;for(i=0;i<o;i++){var r=t[i].children;hi.push({media:r});var l=r.length;for(n=0;n<l;n++){var s=r[n],d={type:"audio"};if(null!=a.mediaId&&(d.mediaId=a.mediaId),e.WP_CONTENT_URL){var p=e.WP_CONTENT_URL.split("/");p=p[p.length-1],p=s.dirname.indexOf(p)+p.length,p=e.WP_CONTENT_URL+"/"+s.dirname.substr(p)+"/"+s.basename}else p=s.fullpath;d[s.extension]=p,e.createDownloadIconsInPlaylist&&!d.download&&(d.download=p),e.createLinkIconsInPlaylist&&!d.link&&(d.link=p),d.title||(d.title=s.filename),r[n]=d}}M(t,a),Ya||(Ya=0),Ga=Ya,bt=Va=bt.find('.hap-accordion-item[data-id="'+Ya+'"]').addClass("hap-accordion-item-inited hap-accordion-item-opened").find(".hap-accordion-item-content"),li=t[Ya].children,a.id3?(Xa=!0,"undefined"==typeof jsmediatags&&console.log("Link to jsmediatags.js missing in head tag!"),Se=-1,Ie=li.length-1,A()):E()}).fail(function(t,e,a){console.log("Error processFolderAccordion: "+t,e,a),v()})}(a)):"json_accordion"==i?(za=!0,function(a){if("file:"==window.location.protocol)return console.log("Reading json requires server connection."),!1;t.ajax({type:"GET",url:a.path,dataType:"json"}).done(function(t){var i,n,o=t.length;for(i=0;i<o;i++){var r=t[i].children;hi.push({media:r}),a.sort&&("filename-asc"==a.sort?HAPUtils.keysrt(r,"filename"):"filename-desc"==a.sort?HAPUtils.keysrt(r,"filename",!0):"date-asc"==a.sort?HAPUtils.keysrt(r,"filemtime"):"date-desc"==a.sort&&HAPUtils.keysrt(r,"filemtime",!0));var l=r.length;for(n=0;n<l;n++){var s=r[n],d={type:"audio"};null!=a.mediaId&&(d.mediaId=a.mediaId),s=ve?ve+"/"+t[i].parent+"/"+s:s,d.mp3=s,e.createDownloadIconsInPlaylist&&!d.download&&(d.download=s),e.createLinkIconsInPlaylist&&!d.link&&(d.link=s),r[n]=d}}M(t,a),Ya||(Ya=0),Ga=Ya,bt=Va=bt.find('.hap-accordion-item[data-id="'+Ya+'"]').addClass("hap-accordion-item-inited hap-accordion-item-opened").find(".hap-accordion-item-content"),li=t[Ya].children,a.id3?(Xa=!0,"undefined"==typeof jsmediatags&&console.log("Link to jsmediatags.js missing in head tag!"),Se=-1,Ie=li.length-1,A()):E()}).fail(function(t,e,a){console.log("Error processJsonAccordion: "+t,e,a),v()})}(a)):"gdrive_folder"==i?function(a){if("file:"==window.location.protocol)return console.log("Reading files from folders locally is not possible! This requires server connection."),!1;if(HAPUtils.isEmpty(e.gDriveAppId))return console.log("gDriveAppId has not been set in settings!"),!1;t.ajax({url:"https://www.googleapis.com/drive/v3/files?q='"+a.path+"'+in+parents&pageSize=1000&key="+e.gDriveAppId,dataType:"jsonp"}).done(function(i){var n,o=i.files.length,r=[],l=[];for(n=0;n<o;n++){var s=i.files[n];/mp3|mpeg|mpeg3|wav|aac|adts/.test(s.mimeType)?l.push(s):/jpg|jpeg|png/.test(s.mimeType)&&r.push(s)}for(a.sort&&("filename-asc"==a.sort?(HAPUtils.keysrt(l,"name"),HAPUtils.keysrt(r,"name")):"filename-desc"==a.sort&&(HAPUtils.keysrt(l,"name",!0),HAPUtils.keysrt(r,"name",!0))),o=l.length,n=0;n<o;n++){s=l[n],(i=t.extend(!0,{},a)).type="audio";var d=s.name.substr(s.name.lastIndexOf(".")+1);a.useGdApi?(i[d.toLowerCase()]="https://www.googleapis.com/drive/v3/files/"+s.id+"?alt=media&key="+e.gDriveAppId,e.createDownloadIconsInPlaylist&&!i.download&&(i.download="https://www.googleapis.com/drive/v3/files/"+s.id+"?alt=media&key="+e.gDriveAppId)):(i[d.toLowerCase()]="https://drive.google.com/uc?export=view&id="+s.id,e.createDownloadIconsInPlaylist&&!i.download&&(i.download="https://drive.google.com/uc?export=download&id="+s.id)),e.createLinkIconsInPlaylist&&!i.link&&(i.link="https://drive.google.com/open?id="+s.id),!i.thumb&&r[n]&&(i.thumb="https://drive.google.com/uc?export=view&id="+r[n].id),i.title||(i.title=s.name.substr(0,s.name.lastIndexOf("."))),li.push(i)}v()}).fail(function(t,e,a){console.log("Error processGdriveFolder: "+t,e,a),v()})}(a):"hls"==i?(li.push(a),v()):"audio"==i?(li.push(a),v()):"shoutcast"==i||"icecast"==i||"radiojar"==i?(li.push(a),v()):"youtube_single"==i||"youtube_playlist"==i?a.noApi?(li.push(a),v()):(qe="youtube",a.loadMore&&(We=!0),ta||P("youtube"),ta.setData(a)):"xml"==i?function(e){t.ajax({type:"GET",url:e.path,dataType:"html"}).done(function(a){var i={};t(a).children(".hap-playlist-item").each(function(){i=b(t(this)),e.origtype&&(i.origtype=e.origtype),null!=e.mediaId&&(i.mediaId=e.mediaId),si.push(i)}),di=si.length,v()}).fail(function(t,e,a){console.log("Error processXml: "+t,e,a),v()})}(a):"json"==i?function(e){t.ajax({type:"GET",url:e.path,dataType:"json"}).done(function(t){if(ni=-1,li=[],si=[],Ca=bt,Array.isArray(t)?si=t:si.push(t),e.origtype&&null!=e.mediaId){var a=si.length;for(t=0;t<a;t++)si[t].origtype=e.origtype,si[t].mediaId=e.mediaId}di=si.length,v()}).fail(function(t,e,a){console.log("Error processJson: "+t,e,a),v()})}(a):"m3u"==i&&function(e){if("file:"==window.location.protocol)return console.log("Reading m3u files requires server connection."),!1;t.ajax({type:"GET",url:e.path}).done(function(a){var i,n;a.replace("#EXTM3U","").split("#EXTINF:").slice(1).map(function(a,o){(i=t.extend(!0,{},e)).type="audio",n=a.split("\n").slice(0,-1),i.mp3=t.trim(n[1]);var r=n[0].split(",");if(1<r.length){var l=r[0];HAPUtils.isNumber(l)&&-1!=l&&(i.duration=l),r=r[1]}else r=r[0];-1<r.indexOf("-")?(r=r.split("-"),i.title=t.trim(r[1]),r[0].match(/^\d+(\s*)+\./)?(r=r[0].substr(r[0].indexOf(".")+1),i.artist=t.trim(r[1])):i.artist=t.trim(r[0])):i.title=t.trim(r),li.push(i)}),v()}).fail(function(t,e,a){console.log("Error process m3u: "+t,e,a),v()})}(a)}}function b(t){var a={};if(a.type=a.origtype=t.attr("data-type"),a.origclasses=t.attr("class"),t.is(":empty")||(a.content=t.html()),null!=t.attr("data-noapi")&&(a.noApi=!0),null!=t.attr("data-category")&&(a.category=t.attr("data-category")),null!=t.attr("data-tag")&&(a.tag=t.attr("data-tag")),null!=t.attr("data-media-id")&&(a.mediaId=parseInt(t.attr("data-media-id"),10)),null!=t.attr("data-audio-preview")&&(a.audioPreview=t.attr("data-audio-preview")),null!=t.attr("data-mp3")&&(a.mp3=t.attr("data-mp3")),null!=t.attr("data-wav")&&(a.wav=t.attr("data-wav")),null!=t.attr("data-aac")&&(a.aac=t.attr("data-aac")),null!=t.attr("data-flac")&&(a.flac=t.attr("data-flac")),null!=t.attr("data-path")&&(a.path=t.attr("data-path"),-1!=a.path.indexOf("ebsfm:")&&(a.path=atob(a.path.substr(6)))),null!=t.attr("data-mountpoint")&&(a.mountpoint=t.attr("data-mountpoint")),null!=t.attr("data-version")&&(a.version=t.attr("data-version")),null!=t.attr("data-sid")&&(a.sid=t.attr("data-sid")),null!=t.attr("data-limit")&&(a.limit=Math.abs(parseInt(t.attr("data-limit"),10))),ua?a.thumb=ua:null!=t.attr("data-thumb")&&(a.thumb=t.attr("data-thumb")),null!=t.attr("data-thumb-default")&&(a.thumbDefault=t.attr("data-thumb-default")),null!=t.attr("data-alt")&&(a.alt=t.attr("data-alt")),null!=t.attr("data-title")&&(a.title=t.attr("data-title")),null!=t.attr("data-description")&&(a.description=t.attr("data-description")),null!=t.attr("data-artist")&&(a.artist=t.attr("data-artist")),null!=t.attr("data-album")&&(a.album=t.attr("data-album")),null!=t.attr("data-download")&&(a.download=t.attr("data-download")),null!=t.attr("data-duration")&&(a.duration=t.attr("data-duration")),null!=t.attr("data-date")&&(a.date=t.attr("data-date")),null!=t.attr("data-id3")&&(a.id3=!0),ha?a.start=ha:null!=t.attr("data-start")&&(a.start=Math.abs(t.attr("data-start"))),fa?a.end=fa:null!=t.attr("data-end")&&(a.end=Math.abs(t.attr("data-end"))),ma)a.playbackRate=ma;else if(null!=t.attr("data-playback-rate")&&!HAPUtils.isEmpty(t.attr("data-playback-rate"))){var i=Number(t.attr("data-playback-rate"));a.playbackRate=HAPUtils.valueLimit(i,e.playbackRateMin,e.playbackRateMax)}return null!=t.attr("data-link")&&(a.link=t.attr("data-link"),a.target="_blank",null!=t.attr("data-target")&&(a.target=t.attr("data-target"))),null!=t.attr("data-share")&&(a.share=t.attr("data-share")),null!=t.attr("data-sort")&&(a.sort=t.attr("data-sort")),null!=t.attr("data-active-accordion")&&(a.activeAccordion=t.attr("data-active-accordion")),t.html().length&&(a.customContent=t.html()),null!=t.attr("data-load-more")&&(We=!0),null!=t.attr("data-use-gd-api")&&(a.useGdApi=!0),null!=t.attr("data-ad-pre")?(a.adPre=t.attr("data-ad-pre").split(",").map(function(t){return t.trim()}),null!=t.attr("data-shuffle-ads")&&1<a.adPre.length&&HAPUtils.shuffleArray(a.adPre)):ya&&(a.adPre=ya),null!=t.attr("data-ad-mid")?(a.adMid=t.attr("data-ad-mid").split(",").map(function(t){return t.trim()}),null!=t.attr("data-shuffle-ads")&&1<a.adMid.length&&HAPUtils.shuffleArray(a.adMid),null!=t.attr("data-ad-mid-interval")&&(a.adMidInterval=t.attr("data-ad-mid-interval"))):va&&(a.adMid=va,ba&&(a.adMidInterval=ba)),null!=t.attr("data-ad-end")?(a.adEnd=t.attr("data-ad-end").split(",").map(function(t){return t.trim()}),null!=t.attr("data-shuffle-ads")&&1<a.adEnd.length&&HAPUtils.shuffleArray(a.adEnd)):Pa&&(a.adEnd=Pa),a}function P(a){"youtube"==a&&(ta=new HAPYoutubeLoader(e),t(ta).on("HAPYoutubeLoader.END_LOAD",function(t,e){var a,i=e.data.length;for(a=0;a<i;a++){var n=e.data[a];li.push(n)}je=e.nextPageToken,Be?E():v()}))}function w(){if(!je)return!1;le=!0,Wt.show(),li=je.splice(0,Fe),0==je.length&&(je=null),ze?(Se=-1,Ie=li.length-1,k()):E()}function k(){var t=li[Ie];jsmediatags.read(t.mp3||t.wav||t.aac,{onSuccess:function(a){var i=(a=a.tags).picture;if(a.artist&&(t.artist=a.artist),a.title&&(t.title=a.title),a.album&&(t.album=a.album),e.getId3Image&&i){var n,o="",r=i.data.length;for(n=0;n<r;n++)o+=String.fromCharCode(i.data[n]);t.thumb="data:"+i.format+";base64,"+window.btoa(o),t.thumbIsBase64=!0}a.TLEN&&(t.duration=a.TLEN.data/1e3),--Ie>Se?k():Be?E():v()},onError:function(t){console.log("ID3 error: ",t.type,t.info),--Ie>Se?k():v()}})}function A(){var t=li[Ie];jsmediatags.read(t.mp3||t.wav||t.aac,{onSuccess:function(a){var i=(a=a.tags).picture;if(a.artist&&(t.artist=a.artist),a.title&&(t.title=a.title),a.album&&(t.album=a.album),e.getId3Image&&i){var n,o="",r=i.data.length;for(n=0;n<r;n++)o+=String.fromCharCode(i.data[n]);t.thumb="data:"+i.format+";base64,"+window.btoa(o),t.thumbIsBase64=!0}a.TLEN&&(t.duration=a.TLEN.data/1e3),--Ie>Se?A():E()},onError:function(t){console.log("ID3 error: ",t.type,t.info),--Ie>Se?A():E()}})}function T(a){if("file:"==window.location.protocol)console.log("Using Podcast requires server connection!");else{a.limit?(Fe=a.limit,a.loadMore&&(We=!0)):Fe=999999999;var i=$a+"?url="+encodeURIComponent(a.path),n=Fe;je=[],t.ajax({url:i,dataType:"json",cache:!1}).done(function(i){i=i.contents.substr(i.contents.indexOf("<?xml"));var o,r,l,s=HAPUtils.parseXML(i),d=0;t(s).find("image").length&&t(s).find("image").attr("href")?l=t(s).find("image").attr("href"):t(i).find("itunes\\:image").length&&t(i).find("itunes\\:image").attr("href")&&(l=t(i).find("itunes\\:image").attr("href")),l&&l.lastIndexOf("&size=Large")&&(l=l.replace("=Large","=Small")),t(s).find("item").each(function(){if(o=t(this),(r=t.extend(!0,{},a)).type="audio",r.mp3=o.find("enclosure").attr("url"),!r.title&&o.find("title").length&&(r.title=o.find("title").text()),r.artist||(o.find("author").length?r.artist=o.find("author").text():o.find("itunes\\:author").length&&(r.artist=o.find("itunes\\:author").text())),o.find("pubDate").length&&(r.date=o.find("pubDate").text()),!r.description&&o.find("description").length){var i=o.find("description").text(),s=document.createElement("div");s.innerHTML=i,r.description=s.textContent||s.innerText||""}r.duration||(o.find("itunes\\:duration").length?r.duration=o.find("itunes\\:duration").text():o.find("duration").length&&(r.duration=o.find("duration").text())),r.thumb||(o.find("image").length&&o.find("image").attr("href")?r.thumb=o.find("image").attr("href"):o.find("itunes\\:image").length&&o.find("itunes\\:image").attr("href")?r.thumb=o.find("itunes\\:image").attr("href"):l&&(r.thumb=l)),r.thumb.lastIndexOf("&size=Large")&&(r.thumb=r.thumb.replace("=Large","=Small")),e.createDownloadIconsInPlaylist&&!r.download&&(r.download=r.mp3),o.find("link").length&&!r.link&&e.createLinkIconsInPlaylist&&(r.link=o.find("link").text()),d<n?li.push(r):je.push(r),d++}),v()}).fail(function(t,e,a){console.log("Error processPodcast: "+t.responseText,e,a),v()})}}function I(){if("file:"==window.location.protocol)console.log("Using SoundCloud requires server connection!");else{if(HAPUtils.isEmpty(e.soundCloudAppId))return console.log("soundCloudAppId has not been set in settings!"),!1;var t=document.createElement("script");t.src="https://connect.soundcloud.com/sdk.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a);var i=setInterval(function(){window.SC&&(i&&clearInterval(i),SC.initialize({client_id:e.soundCloudAppId}),Ve=!0)},100)}}function S(a,i){SC.get(a?"https://api.soundcloud.com/resolve.json?url="+i+"&client_id="+e.soundCloudAppId:i,{limit:Fe,linked_partitioning:1},function(e,a){if(a){for(console.log("Error getSoundCloudPage: "+a);ii.length;)li.push(ii.splice(0,1)[0]);v()}else{if("track"==e.kind)_(e);else if("playlist"==e.kind){var n,o=e.tracks.length;if(ii.length+o>=Fe){o=Fe-ii.length;var r=!0}for(n=0;n<o;n++)_(e.tracks[n])}else if(e.collection)for(o=e.collection.length,ii.length+o>=Fe&&(o=Fe-ii.length,r=!0),n=0;n<o;n++)_(e.collection[n]);else{if(e.username)return n=e.uri,void S(!1,n=/likes/.test(i)?n+"/likes":/favorites/.test(i)?n+"/favorites":n+"/tracks");if(t.isArray(e))for(o=e.length,ii.length+o>=Fe&&(o=Fe-ii.length,r=!0),n=0;n<o;n++)_(e[n])}if(je=e.next_href?e.next_href:null,e.next_href&&!r)S(!1,e.next_href);else{for(;ii.length;)li.push(ii.splice(0,1)[0]);v()}}})}function x(){if(!je)return!1;le=!0,Wt.show(),li=[],li=je.splice(0,Fe),0==je.length&&(je=null),E()}function C(){if(!je)return!1;if(le=!0,Wt.show(),ni=0,si=[],di=1,window.SC)S(!1,je);else{I();var t=setInterval(function(){Ve&&(t&&clearInterval(t),S(!1,je))},100)}}function _(a){if(a.streamable&&a.stream_url){var i=t.extend(!0,{},si[ni]);i.type="audio",a.duration&&(i.duration=a.duration/1e3),i.mp3=a.stream_url+"?client_id="+e.soundCloudAppId,e.createDownloadIconsInPlaylist&&!i.download&&a.downloadable&&a.download_url&&(i.download=i.mp3.replace(/\/stream\\?/,"/download")),!i.title&&a.title&&(i.title=a.title),!i.description&&a.description&&(i.description=a.description),!i.thumb&&a.artwork_url&&(i.thumb=a.artwork_url),a.created_at&&(i.date=a.created_at),i.favoritingsCount=parseInt(a.favoritings_count?a.favoritings_count:0,10),i.playbackCount=parseInt(a.playback_count?a.playback_count:0,10),i.hotness=i.favoritingsCount+i.playbackCount,a.permalink_url&&e.createLinkIconsInPlaylist&&!i.link&&(i.link=a.permalink_url),ii.push(i)}}function E(){var a,i,n,o,r,l,s=Aa?ka:oi.length,d=li.length,p=0,c=[];for(ri=[],a=0;a<d;a++){var m=a+s;Aa&&p++;var g=Ia?li[a].data:li[a],y=g.type;if(e.usePlaylist){var v=r=o=n=l=null;if(-1!=Qt.indexOf("thumb")&&(i=g.thumb||g.thumbDefault)){"soundcloud"==g.origtype&&e.soundCloudThumbQualityInPlaylist&&(i=i.replace("large.jpg",e.soundCloudThumbQualityInPlaylist)),!ve||g.thumbIsBase64||HAPUtils.relativePath(i)||(i=ve+i);var b=g.alt?g.alt:g.title?g.title.replace(/"/g,"'"):"image";n='<img class="hap-thumbimg" src="'+i+'" alt="'+b+'"/>'}if(-1!=Qt.indexOf("description")&&g.description&&(o=g.description,e.limitDescriptionText&&(o=o.substr(0,e.limitDescriptionText)+"...")),-1!=Qt.indexOf("duration")&&g.duration&&(r=isNaN(g.duration)?-1==g.duration.lastIndexOf(":")?HAPUtils.formatTime(g.duration):g.duration:HAPUtils.formatTime(g.duration)),-1!=Qt.indexOf("date")&&g.date&&(v=new Date(g.date).toDateString().slice(4,10)),e.playlistItemMarkup)i=e.playlistItemMarkup,-1!=Qt.indexOf("thumb")&&n&&(n||(n=""),i=i.replace("__THUMB__",n)),-1!=Qt.indexOf("title")&&(b=g.title?g.title:"",i=(i=i.replace("__TITLE__",b)).replace("__SEPARATOR__",e.artistTitleSeparator),b=g.artist?g.artist:"",i=i.replace("__ARTIST__",b)),-1!=Qt.indexOf("description")&&(o||(o=""),i=i.replace("__DESCRIPTION__",o)),-1!=Qt.indexOf("duration")&&(r||(r=""),i=i.replace("__DURATION__",r)),-1!=Qt.indexOf("date")&&(v||(v=""),i=i.replace("__DATE__",v)),b=(i=t(i)).find(".hap-playlist-item-content");else{if(g.origclasses||(g.origclasses="hap-playlist-item"),i=t('<div class="'+g.origclasses+'"/>'),delete g.origclasses,b=t('<div class="hap-playlist-item-content"/>').appendTo(i),-1!=Qt.indexOf("thumb")&&n&&t('<span class="hap-playlist-thumb">'+n+"</span>").appendTo(b),-1!=Qt.indexOf("title")||-1!=Qt.indexOf("description")&&g.description){if(n=t('<span class="hap-playlist-info">').appendTo(b),-1!=Qt.indexOf("title")&&g.title){var P='<span class="hap-playlist-title-wrap">';e.useNumbersInPlaylist&&(P+='<span class="hap-playlist-title-num"></span>'),g.artist&&g.title?P="title"==Kt[0]?P+'<span class="hap-playlist-title">'+g.title+"</span>"+e.artistTitleSeparator+'<span class="hap-playlist-artist">'+g.artist+"</span>":P+'<span class="hap-playlist-artist">'+g.artist+"</span>"+e.artistTitleSeparator+'<span class="hap-playlist-title">'+g.title+"</span>":g.title?P+='<span class="hap-playlist-title">'+g.title+"</span>":g.artist&&(P+='<span class="hap-playlist-artist">'+g.artist+"</span>"),P+="</span>",n.append(P)}-1!=Qt.indexOf("description")&&o&&t('<span class="hap-playlist-description">'+o+"</span>").appendTo(n)}(-1!=Qt.indexOf("duration")&&g.duration||-1!=Qt.indexOf("date")&&g.date)&&(o=t('<span class="hap-playlist-info2">').appendTo(b),-1!=Qt.indexOf("duration")&&r&&t('<span class="hap-playlist-duration">'+r+"</span>").appendTo(o),-1!=Qt.indexOf("date")&&v&&t('<span class="hap-playlist-date">'+v+"</span>").appendTo(o))}if(i.attr("data-type",y),null!=g.mediaId&&i.attr("data-media-id",g.mediaId),g.title&&(v=g.title.replace(/['"\|]/g,""),r=se.getTitle(g,!0),i.attr({title:r,"data-title":g.title,"data-safe-title":v}),g.safeTitle=v),g.artist&&(v=g.artist.replace(/['"\|]/g,""),i.attr({"data-artist":g.artist,"data-safe-artist":v}),g.safeArtist=v),g.description&&i.attr("data-description",g.description),g.link&&i.attr("data-link",g.link),g.share&&i.attr("data-share",g.share),g.category&&i.attr("data-category",g.category),g.tag&&i.attr("data-tag",g.tag),e.useStatistics&&Jt.length?(l=e.playlistItemMarkup?i.find(".hap-playlist-icons"):t('<div class="hap-playlist-icons"></div>').appendTo(i),v=t('<div class="hap-stats"></div>'),l.prepend(v),-1!=Jt.indexOf("plays")&&(r=t('<div class="hap-stat-icon hap-play-count" title="'+e.tooltipStatPlays+'">'+e.statPlayIcon+"<span>0</span></div>"),v.append(r)),-1!=Jt.indexOf("likes")&&(r=t('<div class="hap-stat-icon hap-like-count" title="'+e.tooltipStatLikes+'">'+e.statLikeIcon+"<span>0</span></div>"),v.append(r)),-1!=Jt.indexOf("downloads")&&(r=ue&&null!=g.download?t('<a href="'+g.download+'" class="hap-stat-icon hap-download-count" download aria-label="'+e.tooltipStatDownloads+'" title="'+e.tooltipStatDownloads+'">'+e.statDownloadIcon+"<span>0</span></a>"):t('<div class="hap-stat-icon hap-download-count hap-no-download" title="'+e.tooltipStatDownloads+'">'+e.statDownloadIcon+"<span>0</span></div>"),v.append(r))):e.createDownloadIconsInPlaylist&&ue&&g.download&&(l=e.playlistItemMarkup?i.find(".hap-playlist-icons"):t('<div class="hap-playlist-icons"></div>').appendTo(i),v=t('<a class="hap-download" href="'+g.download+'" download title="'+e.downloadIconTitle+'" aria-label="'+e.downloadIconTitle+'">'+e.downloadIcon+"</a>"),l.prepend(v)),e.createLinkIconsInPlaylist&&g.link&&(l||(l=e.playlistItemMarkup?i.find(".hap-playlist-icons"):t('<div class="hap-playlist-icons"></div>').appendTo(i)),r=t('<a class="hap-link" href="'+g.link+'" target="'+(g.target||"_blank")+'" title="'+e.linkIconTitle+'" aria-label="'+e.linkIconTitle+'">'+e.linkIcon+"</a>"),l.prepend(r)),g.customContent&&(i.append(g.customContent),delete g.customContent),e.addPlaylistEvents&&(b.on("click",u),!Ft)&&b.on("mouseenter",h).on("mouseleave",f),Aa){w?w.after(i):wa?i.appendTo(bt):bt.children("div").eq(ka).before(i);var w=i}else i.appendTo(bt)}else e.useStatistics&&null!=g.mediaId&&(g.title&&(v=g.title.replace(/['"\|]/g,""),g.safeTitle=v),g.artist&&(v=g.artist.replace(/['"\|]/g,""),g.safeArtist=v));null!=_a&&(g.playlistId=_a),za?c.push({id:a,type:y,data:g}):oi.splice(m,0,{id:m,type:y,data:g}),ri.push({id:m,type:y,data:g})}za?(hi[Ya].data=c,Fa?(H(!1),e.useStatistics&&N()):(oi=c,H(!0),e.useStatistics&&N(),Ti.setPlaylistItems(di)),O(),(p=Va[0]).style.height=p.scrollHeight+"px",Wa=!1,Fa=!0):(Ca=bt,console.log("playlistDataArr = ",oi),H(!0),e.useStatistics&&N(),Aa?(m=Ti.getCounter(),Ti.setPlaylistItems(di,!1),ka<=m&&(wa||Ti.reSetCounter(m+p)),Ta&&Ti.setCounter(ka,!1),Ua=!1):Ti.setPlaylistItems(di),O())}function M(t,e){var a,i=t.length,n="";for(a=0;a<i;a++){var o=t[a].parent.replace(/"/g,"'");"undefined"!==e.activeAccordion&&e.activeAccordion==o&&(Ya=a),n+='<div class="hap-accordion-item" data-id="'+a+'" title="'+o+'"><span class="hap-accordion-item-title">'+o+'</span><div class="hap-accordion-item-content">',t[a].description&&(n+='<span class="hap-accordion-item-description">'+t[a].description+"</span>"),n+="</div></div>"}bt.html(n)}function H(a){if(a&&(di=oi.length),e.usePlaylist){var i,n,o,r=0;bt.find(".hap-playlist-item").each(function(){i=t(this).attr("data-id",r),(o=i.find(".hap-playlist-title")).length&&e.useNumbersInPlaylist&&(n=HAPUtils.formatNumber(r)+e.numberTitleSeparator,i.find(".hap-playlist-title-num").length?i.find(".hap-playlist-title-num").html(n):o.before(t('<span class="hap-playlist-title-num">'+n+"</span>"))),a&&(oi[r].id=r),r++})}}function N(){var t,e=[];for(t=0;t<di;t++){var a=oi[t].data;a.id=t,a.hapStatsSet||null==a.mediaId||(e.push({media_id:a.mediaId,title:a.safeTitle||"",artist:a.safeArtist||""}),a.hapStatsSet=!0)}e.length&&X("hap_all_count",null,e)}function O(){if(Wt.hide(),le=!1,!re){if(re=!0,Sa&&null!=Sa.attr("data-use-pagination")&&(ke=Math.ceil(Ee/_e),Ee>_e)){var a;for(J(Ae=0),a=0;a<ke;a++){var i=0==a?{page:0}:{page:null};ti.push(i)}K()}if(e.usePlaylistScroll&&!pa&&(vt.length&&function(t){t.mCustomScrollbar({axis:"horizontal"==e.playlistScrollOrientation?"x":"y",theme:e.playlistScrollTheme,scrollInertia:0,mouseWheel:{normalizeDelta:!0,deltaFactor:50,preventDefault:!0},keyboard:{enable:!1},advanced:{autoExpandHorizontalScroll:!0},callbacks:{onOverflowYNone:function(){t.find(".mCSB_container").addClass("hap-mCSB_full")},onOverflowY:function(){t.find(".mCSB_container").removeClass("hap-mCSB_full")},onTotalScroll:function(){We?je&&qe&&!le&&(le=!0,Wt.show(),Be=!0,li=[],gi&&gi.css("opacity",0),"soundcloud"==qe?C():"podcast"==qe?x():"folder"==qe?w():"youtube"==qe&&(ta||P("youtube"),ta.resumeLoad(je))):Ce&&(Be||Q())}}})}(vt),pa=!0),setTimeout(function(){e.hidePlayerUntilMusicStart||(-1<ht.indexOf("hap-fixed")&&tt(),e.addResizeEvent&&F(),ut.css("opacity",1)),t(se).trigger("setupDone",{instance:se,instanceName:e.instanceName})},100),Ba)Ba.setVolume(e.volume);else var n=setInterval(function(){Ba&&(clearInterval(n),Ba.setVolume(e.volume))},100);za&&(qa=ct.find(".hap-accordion-item").eq(Ya),ct.find(".hap-accordion-item-title").on("click",function(){var a=t(this).closest(".hap-accordion-item");if(a.hasClass("hap-accordion-item-opened")){a.removeClass("hap-accordion-item-opened");var i=a.find(".hap-accordion-item-content")[0];i.style.height="0"}else{if(e.allowOnlyOneOpenedAccordion&&qa&&qa!=a&&(qa.removeClass("hap-accordion-item-opened"),(i=qa.find(".hap-accordion-item-content")[0]).style.height="0"),a.hasClass("hap-accordion-item-inited"))(i=a.find(".hap-accordion-item-content")[0]).style.height=i.scrollHeight+"px";else{if(Wa)return!1;Wa=!0,Wt.show(),Ya=a.attr("data-id"),bt=Va=a.addClass("hap-accordion-item-inited").find(".hap-accordion-item-content"),li=hi[Ya].media,Xa?(Se=-1,Ie=li.length-1,A()):E()}qa=a.addClass("hap-accordion-item-opened")}}))}if(e.usePlaylist&&0<di){var o=[];bt.find(".hap-thumbimg:not(.hap-visible)").each(function(){o.push(t(this))});var r=0;for(a=o.length,i=0;i<a;i++)setTimeout(function(){clearTimeout(this),o[r].addClass("hap-visible"),r++},50+50*i);HAPUtils.isEmpty(ie)||se.sort(ie)}if(!xa&&(xa=!0,!Aa&&!Be&&0<di))if(null!=e.mediaId){if(e.mediaTitle?(0==(a=bt.find(".hap-playlist-item[data-media-id="+e.mediaId+'][data-safe-title="'+e.mediaTitle+'"]')).length&&(a=bt.find(".hap-playlist-item[data-media-id="+e.mediaId+"]")),delete e.mediaTitle):a=bt.find(".hap-playlist-item[data-media-id="+e.mediaId+"]"),null==(a=bt.children(".hap-playlist-item").index(a))||-1==a)return alert("No media with ID to load! LoadMedia failed."),!1;delete e.mediaId,Ti.processPlaylistRequest(a)}else(a=e.activeItem)>di-1&&(a=di-1),-1<a&&Ti.setCounter(a,!1);Be=Aa=!1,gi&&(We?je?gi.css("opacity",1):(gi.remove(),gi=null,We=!1):Ce&&0<Ee?Ee>Me?gi.css("opacity",1):(gi.remove(),gi=null,Ce=!1):(gi.remove(),gi=null)),t(se).trigger("playlistEndLoad",{instance:se,instanceName:e.instanceName,loadMoreOnTotalScroll:We,addMoreOnTotalScroll:Ce,playlistLength:di}),-1<ht.indexOf("hap-wall")&&(Te?bt.masonry("reloadItems"):(void 0===t.fn.masonry&&console.log("Link to masonry.pkgd.min.js file missing in head tag!"),"function"!=typeof imagesLoaded&&console.log("Link to imagesloaded.pkgd.min file missing in head tag!"),Te=bt.masonry({itemSelector:".hap-playlist-item",columnWidth:".hap-grid-sizer"})),bt.imagesLoaded(function(){Te.masonry("layout")}),bt.find(".hap-playlist-item-content:not(.hap-has-overlay)").each(function(){t(this).addClass("hap-has-overlay").find(".hap-playlist-thumb").after(t('<div class="hap-wall-overlay"></div>'))}))}function U(){Ye=new Hls,Ge=Hls.isSupported(),Xe=!0,Ye.on(Hls.Events.MEDIA_ATTACHED,function(){Ye.loadSource(Na)}),Ye.on(Hls.Events.ERROR,function(t,e){if(e.fatal)switch(e.type){case Hls.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover"),Ye.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),Ye.recoverMediaError();break;default:Ye.destroy()}})}function D(){if("hls"==Ha){if(Na=Da.path,!Xe){if("undefined"==typeof Hls){var a=document.createElement("script");a.type="text/javascript",a.src=microjob.childdir+"/assets/js/hls.js",a.onload=a.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(U(),D())},a.onerror=function(){alert("Error loading "+this.src)};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(a,i)}else U(),D();return}}else if("shoutcast"==Ha||"icecast"==Ha||"radiojar"==Ha)Na=e.useCorsForAudio?e.cors+Da.path:Da.path,Da.mountpoint&&(Na+=Da.mountpoint),"shoutcast"==Ha&&"/;"!=Na.substring(Na.length-2)&&(Na+="/;"),$e||("undefined"==typeof HAPRadioData&&console.log("link to radio.js file missing in head tag!"),$e=new HAPRadioData(e,Ct),t($e).on("HAPRadioData.DATA_READY",function(t,e){e.title&&(Da.title=e.title),e.artist&&(Da.artist=e.artist),e.thumb&&(Da.thumb=e.thumb),Y()})),$e.getData(Da);else if(e.useAudioPreview&&Da.audioPreview)Na=Da.audioPreview;else for(a=0;a<ne.length;a++)if("mp3"==(i=ne[a])){if(fe&&Da.mp3){Na=Da.mp3;break}}else if("aac"==i){if(ge&&Da.aac){Na=Da.aac;break}}else if("wav"==i){if(me&&Da.wav){Na=Da.wav;break}}else if("flac"==i){if(ye&&Da.flac){Na=Da.flac;break}}else if("path"==i&&Da.path){Na=Da.path;break}if(Na){if(-1!=Na.indexOf("ebsfm:")&&(Na=atob(Na.substr(6))),"audio"==Ha&&ve&&!HAPUtils.relativePath(Na)&&(Na=ve+Na),ei.on("ended",function(){Qe&&Qe.isAdEndOn()||(Wi&&Di&&!Ri&&!zi.isDrag()?(Ri=!0,ai.currentTime=Hi,ai.play()):B())}).on("canplay",function(t){}).on("canplaythrough",function(t){}).on("loadedmetadata",function(){null==Da.playbackRate&&(Da.playbackRate=1),ai.playbackRate=Da.playbackRate,Fi&&Fi.setVisual(Da.playbackRate),"audio"==Ha&&(e.resumeTime?(ai.currentTime=e.resumeTime,delete e.resumeTime):Da.start&&(ai.currentTime=Da.start));var t=ai.duration;HAPUtils.isNumber(t)&&Ot.html(HAPUtils.formatTime(t))}).on("play",function(){L()}).on("pause",function(){j()}).on("seeked",function(){Wi&&Di&&setTimeout(function(){clearTimeout(this),Ri=!1},500)}).on("error",function(a){t(se).trigger("soundError",{instance:se,instanceName:e.instanceName,media:Da,error:a})}),"hls"==Ha){if("file:"==window.location.protocol)return console.log("Playing HLS requires server connection!"),!1;if(Ge)Ye.attachMedia(ai);else if(ai.canPlayType("application/vnd.apple.mpegurl"))ai.src=Na;else{if(!Da.mp3)return void alert("This browser or device does not support HLS extension. Please use mp3 audio for playback!");ai.src=Da.mp3}Gt&&(void 0!==(a=ai.play())&&a.then(function(){}).catch(function(t){}))}else ai.src=Na,Gt&&(void 0!==(a=ai.play())&&a.then(function(){}).catch(function(t){}));ai.volume=$t,Gt=!0,"shoutcast"!=Ha&&"icecast"!=Ha&&"radiojar"!=Ha&&(Ra&&clearInterval(Ra),Ra=setInterval(R,ci))}else alert("No required audio format supplied! Please add mp3 audio format to play!")}function R(){if(!(La||e.pauseAudioDuringAds&&Qe&&Qe.isAdOn())){if("youtube"==Ha){if(aa)var a=aa.getCurrentTime(),i=aa.getDuration(),n=aa.getVideoLoadedFraction()}else if("audio"==Ha&&ai&&(a=ai.currentTime,i=ai.duration,HAPUtils.isNumber(a)&&HAPUtils.isNumber(i)&&void 0!==ai.buffered&&0!=ai.buffered.length)){try{var o=ai.buffered.end(ai.buffered.length-1)}catch(t){}isNaN(o)||(n=o/i)}HAPUtils.isNumber(a)&&HAPUtils.isNumber(i)&&(!xe&&0<a&&pi&&(xe=!0,t(se).trigger("soundPlay",{instance:se,instanceName:e.instanceName,media:Da})),xi?Si.drawSeekbar(n,a,i):(It.width(a/i*ja),n&&Tt.width(n*ja)),Nt.html(HAPUtils.formatTime(a)),Ot.html(HAPUtils.formatTime(i)),!La&&Da.end&&a>=Da.end?B():Wi&&Di&&!Ri&&!zi.isDrag()&&(parseInt(a,10)<parseInt(Hi,10)||a>Ni)&&(Ri=!0,se.seek(Hi)))}}function L(){if(Ma||(Ma=!0,ja=At.width(),Da.adMid&&Qe.adMidStartHandler()),Da.adMid&&Qe.adMidPlayHandler(),e.togglePlaybackOnMultipleInstances&&1<hap_mediaArr.length){var a,i=hap_mediaArr.length;for(a=0;a<i;a++)se!=hap_mediaArr[a].inst&&hap_mediaArr[a].inst.pauseMedia()}xe&&t(se).trigger("soundPlay",{instance:se,instanceName:e.instanceName,media:Da}),Dt.find(".hap-btn-play").hide(),Dt.find(".hap-btn-pause").show(),pi=!0,e.hidePlayerUntilMusicStart&&Z(),ae&&"undefined"!=typeof ga&&ga("send",{hitType:"event",eventCategory:"Modern audio player: "+e.instanceName,eventAction:"played",eventLabel:"title: "+se.getTitle(Da,!0)+" | time: "+Math.round(se.getCurrentTime()),nonInteraction:!0}),-1<ht.indexOf("hap-fixed")&&$(!0)}function j(){Dt.find(".hap-btn-play").show(),Dt.find(".hap-btn-pause").hide(),pi=!1,t(se).trigger("soundPause",{instance:se,instanceName:e.instanceName,media:Da}),ae&&"undefined"!=typeof ga&&ga("send",{hitType:"event",eventCategory:"Modern audio player: "+e.instanceName,eventAction:"paused",eventLabel:"title: "+se.getTitle(Da,!0)+" | time: "+Math.round(se.getCurrentTime()),nonInteraction:!0}),-1<ht.indexOf("hap-fixed")&&$()}function B(){Qe&&Qe.clearAdMidTimeout(),t(se).trigger("soundEnd",{instance:se,instanceName:e.instanceName,media:Da}),e.useStatistics&&X("hap_finish_count",Oa),ae&&"undefined"!=typeof ga&&ga("send",{hitType:"event",eventCategory:"Modern audio player: "+e.instanceName,eventAction:"ended",eventLabel:"title: "+se.getTitle(Da,!0),nonInteraction:!0}),Da.adEnd?Qe.setAdEnd():q()}function q(t){var a=Da.start||0;"single"==e.loopState?(t||V(),"youtube"==Ha?aa&&(aa.seekTo(a),aa.playVideo()):(t&&(ai.src=Na),ai.currentTime=a,ai.play())):"off"!=e.loopState&&"playlist"!=e.loopState||se.nextMedia()}function W(){Ra&&clearInterval(Ra),Qe&&(Qe.cleanAds(),It.removeClass("hap-ad-progress-level"),Ut.hide()),"shoutcast"==Ha||"icecast"==Ha||"radiojar"==Ha?$e.destroy():"hls"==Ha?Ge&&Ye.detachMedia():"youtube"==Ha&&aa&&(ra=!0,ea.hide(),na&&aa.stopVideo(),oa=!1),ai&&(ai.pause(),ai.src=""),ei&&ei.off("ended canplay canplaythrough loadedmetadata pause play error timeupdate seeked"),Nt.html("00:00"),Ot.html("00:00"),Mt.html(""),Ht.html(""),It.width(0),Tt.width(0),Ha=null,Ta=Ma=pi=!1,Xt||(Gt=!1),Wi&&se.resetRange(),Dt.find(".hap-btn-play").show(),Dt.find(".hap-btn-pause").hide(),xe=!1,e.useTitleScroll&&mi&&mi.deactivate()}function z(){void 0!==t.fn.masonry&&Te&&bt.masonry("destroy"),Ha&&(W(),Ea&&g()),e.sortableTracks&&e.sortableTracksSet&&(bt.sortable("destroy"),e.sortableTracksSet=!1),bt.empty(),Ca=null,xa=Aa=!1,di=0,ni=-1,oi=[],li=[],si=[],Ti.reSetCounter(),Pa=ba=va=ya=ma=fa=ha=ua=Sa=null,Ce=!1,ve=null,Be=!1,qe=je=null,We=!1,Le=Re=De=Ue=He=Oe=Ne=Me=Ee=_e=null,ie="",wt.find(".hap-btn-sort-alpha-up").hide(),wt.find(".hap-btn-sort-alpha-down").show(),yi.val(""),Pt.hide(),we=Pe=null,ti=[],e.placeHolderThumb?(Ct.css("opacity",0),setTimeout(function(){Ct.css("backgroundImage","url("+e.placeHolderThumb+")").css("opacity",1)},300)):Ct.css("backgroundImage","none").css("opacity",0),t(se).trigger("destroyPlaylist",{instance:se,instanceName:e.instanceName})}function V(){Zt&&te&&(oi[Oa].data.start=se.getCurrentTime()),e.useStatistics&&X("hap_play_count",Oa)}function F(){if(!re||!e.addResizeEvent)return!1;if(ja=At.width(),Qe&&Qe.setSeekBarSize(ja),e.useTitleScroll&&mi&&mi.checkSize(),Wi&&void 0!==Hi&&void 0!==Ni){var t=se.getDuration();void 0!==t&&(Li&&Li.css("left",Hi/t*ja+"px"),ji&&ji.css("left",Ni/t*ja+"px"))}if(Ii.hide(),(t=ct.width())<e.playlistItemMultilineWidth?bt.addClass("hap-playlist-item-multiline"):bt.removeClass("hap-playlist-item-multiline"),e.breakPointArr){var a,i=e.breakPointArr.length;for(a=0;a<i;a++){var n=e.breakPointArr[a];t<n?ct.addClass("hap-breakpoint-"+n.toString()):ct.removeClass("hap-breakpoint-"+n.toString())}}}function Y(){if(console.log("setTitleAndThumb"),Da.title&&Mt.html(Da.title),Da.artist&&Ht.html(Da.artist),Da.description&&ct.find(".hap-player-desc").html(Da.description),e.useTitleScroll&&mi&&mi.input(se.getTitle(Da)),(!fi||!ua)&&Ct.length){var t=Da.thumb||Da.thumbDefault;t?G(t):"youtube"==Ha&&Ct.css("opacity",1)}}function G(a){!ve||Da.thumbIsBase64||HAPUtils.relativePath(a)||(a=ve+a),"soundcloud"==Da.origtype&&e.soundCloudThumbQuality&&(a=a.replace("large.jpg",e.soundCloudThumbQuality)),a=encodeURI(a),-1<Ct.css("backgroundImage").indexOf(a)||(Da.title?Ct.attr("aria-label",Da.title):Ct.attr("aria-label",""),fi?(Ct.css("opacity",0),setTimeout(function(){Ct.css("backgroundImage","url("+a+")").css("opacity",1)},300)):Ct.css("backgroundImage","url("+a+")").css("opacity",1),fi=!0,(-1<ht.indexOf("hap-metalic")||-1<ht.indexOf("hap-poster"))&&ct.find(".hap-player-image").fadeOut(300,function(){t(this).css("backgroundImage","url("+a+")").fadeIn(300)}))}function X(a,i,n){if("file:"!=window.location.protocol){if("hap_all_count"==a)var o=[{name:"action",value:a},{name:"data",value:JSON.stringify(n)}];else if("hap_play_count"==a){if(!oi[i])return;if(null==(n=oi[i].data).mediaId)return;if(null==_a){if(null==n.playlistId)return;_a=n.playlistId}o=[{name:"action",value:a},{name:"playlist_id",value:_a},{name:"media_id",value:n.mediaId},{name:"title",value:n.safeTitle||""},{name:"artist",value:n.safeArtist||""},{name:"currentTime",value:ai.currentTime},{name:"duration",value:ai.duration}]}else if("hap_download_count"==a||"hap_like_count"==a||"hap_finish_count"==a){if(null==(n=oi[i].data).mediaId)return;if(null==_a){if(null==n.playlistId)return;_a=n.playlistId}o=[{name:"action",value:a},{name:"playlist_id",value:_a},{name:"media_id",value:n.mediaId},{name:"title",value:n.safeTitle||""},{name:"artist",value:n.safeArtist||""}]}t.ajax({url:e.ajax_url,type:"post",data:o,dataType:"json"}).done(function(t){if(e.usePlaylist&&t){var n=bt.find('.hap-playlist-item[data-id="'+i+'"]');if("hap_like_count"==a&&t.c_like)n.find(".hap-like-count span").html(HAPUtils.nFormatter(parseInt(t.c_like,10),1));else if("hap_download_count"==a&&t.c_download)n.find(".hap-download-count span").html(HAPUtils.nFormatter(parseInt(t.c_download,10),1));else if("hap_play_count"==a&&t.c_play)n.find(".hap-play-count span").html(HAPUtils.nFormatter(parseInt(t.c_play,10),1));else if("hap_all_count"==a){var o,r=t.length;for(n=0;n<r;n++){var l=t[n];l.title&&l.artist?o=bt.find('.hap-playlist-item[data-media-id="'+l.media_id+'"][data-safe-title="'+l.title+'"][data-safe-artist="'+l.artist+'"]'):l.title?o=bt.find('.hap-playlist-item[data-media-id="'+l.media_id+'"][data-safe-title="'+l.title+'"]'):l.artist&&(o=bt.find('.hap-playlist-item[data-media-id="'+l.media_id+'"][data-safe-artist="'+l.artist+'"]')),o.find(".hap-like-count span").html(HAPUtils.nFormatter(parseInt(l.c_like,10),1)),o.find(".hap-download-count span").html(HAPUtils.nFormatter(parseInt(l.c_download,10),1)),o.find(".hap-play-count span").html(HAPUtils.nFormatter(parseInt(l.c_play,10),1))}}}}).fail(function(t,e,a){console.log("Error getStats: "+t.responseText,e,a)})}}function $(t){zt.find(".hap-btn").hide(),t?zt.find(".hap-btn-pause").show():zt.find(".hap-btn-play").show()}function Q(){Wt.show(),Be=!0,gi&&gi.css("opacity",0);var a=[{name:"action",value:"hap_add_more"},{name:"playlist_id",value:_a},{name:"addMoreOffset",value:Me},{name:"addMoreLimit",value:_e},{name:"addMoreSortOrder",value:Ne},{name:"addMoreSortDirection",value:Oe},{name:"encryptMediaPaths",value:He},{name:"taxonomy",value:Ue},{name:"category",value:De},{name:"tag",value:Re},{name:"match",value:Le}];console.log(a),t.ajax({url:e.ajax_url,type:"post",data:a,dataType:"json"}).done(function(t){console.log(t),Sa&&null!=Sa.attr("data-add-more-offset")&&(Me=parseInt(Sa.attr("data-add-more-offset"),10)+_e,Sa.attr("data-add-more-offset",Me)),se.addTrack(t)}).fail(function(t,e,a){console.log(t,e,a),se.endLoadMore()})}function K(){ti[Ae].page=Ae;var e=[];bt.find(".hap-playlist-item:not(.hap-pagination-hidden)").each(function(){e.push(t(this))}),ti[Ae].media_id=e}function J(a){var i='<div class="hap-pagination-container">';if(1<(a+=1)&&(i+='<div class="hap-pagination-page hap-pagination-prev" data-page-id="prev" title="'+e.paginationPreviousBtnTitle+'">'+e.paginationPreviousBtnText+"</div>"),3<a&&(i+='<div class="hap-pagination-page hap-pagination-start" data-page-id="0">1</div><div class="hap-pagination-dots">...</div>'),0<a-2){var n=a-2;i+='<div class="hap-pagination-page" data-page-id="'+(n-1)+'">'+n+"</div>"}0<a-1&&(i+='<div class="hap-pagination-page" data-page-id="'+((n=a-1)-1)+'">'+n+"</div>"),i+='<div class="hap-pagination-page hap-pagination-currentpage" data-page-id="'+((n=a)-1)+'">'+n+"</div>",a+1<ke+1&&(i+='<div class="hap-pagination-page" data-page-id="'+((n=a+1)-1)+'">'+n+"</div>"),a+2<ke+1&&(i+='<div class="hap-pagination-page" data-page-id="'+((n=a+2)-1)+'">'+n+"</div>"),a<ke-2&&(i+='<div class="hap-pagination-dots">...</div><div class="hap-pagination-page hap-pagination-end" data-page-id="'+((n=ke)-1)+'">'+n+"</div>"),a<ke&&(i+='<div class="hap-pagination-page hap-pagination-next" data-page-id="next" title="'+e.paginationNextBtnTitle+'">'+e.paginationNextBtnText+"</div>"),i+="</div>",we?we.html(i):ct.append('<div class="hap-pagination-wrap">'+i+"</div>"),be||(be=!0,we=ct.find(".hap-pagination-wrap").on("click",".hap-pagination-page:not(.hap-pagination-currentpage)",function(){if(!re||le||Be)return!1;Be=!0,Pe&&Pe.removeClass("hap-pagination-currentpage"),Pe=t(this).addClass("hap-pagination-currentpage");var a=t(this).attr("data-page-id");Ae="prev"==a?Ae-1:"next"==a?Ae+1:parseInt(a,10),null==ti[Ae].page?(Me=Ae*_e,function(){Wt.show(),Be=!0;var a=[{name:"action",value:"hap_paginate"},{name:"playlist_id",value:_a},{name:"addMoreOffset",value:Me},{name:"addMoreLimit",value:_e},{name:"addMoreSortOrder",value:Ne},{name:"addMoreSortDirection",value:Oe},{name:"encryptMediaPaths",value:He},{name:"taxonomy",value:Ue},{name:"category",value:De},{name:"tag",value:Re},{name:"match",value:Le}];console.log(a),t.ajax({url:e.ajax_url,type:"post",data:a,dataType:"json"}).done(function(e){console.log(e),bt.find(".hap-playlist-item:visible").addClass("hap-pagination-hidden").each(function(){t(this).find(".hap-thumbimg").removeClass("hap-visible")}),se.addTrack(e),J(Ae),K()}).fail(function(t,e,a){console.log(t,e,a),se.endLoadMore()})}()):(bt.find(".hap-playlist-item:visible").addClass("hap-pagination-hidden").each(function(){t(this).find(".hap-thumbimg").removeClass("hap-visible")}),t(ti[Ae].media_id).each(function(){var e=t(this).removeClass("hap-pagination-hidden").find(".hap-thumbimg").removeClass("hap-visible");setTimeout(function(){e.addClass("hap-visible")},20)}),J(Ae),Be=!1)}),Pe=we.find(".hap-pagination-currentpage"))}function Z(){e.hidePlayerUntilMusicStart&&(e.hidePlayerUntilMusicStart=!1,ut.removeClass("hap-music-player-force-hidden"),F(),-1<ht.indexOf("hap-fixed")&&tt(),setTimeout(function(){ut.css("opacity",1)},50))}function tt(){-1<ht.indexOf("hap-fixed")&&(Vt.on("click",function(){e.playerOpened?(ct.stop().animate({bottom:-ct.height()+"px"},{duration:400,complete:function(){Vt.find(".hap-btn").hide(),Vt.find(".hap-btn-player-open").show(),0<di&&Ha&&zt.show()}}),e.playlistOpened=!1):(ct.stop().animate({bottom:-yt.height()+"px"},{duration:400}),Vt.find(".hap-btn").hide(),Vt.find(".hap-btn-player-close").show(),zt.hide()),e.playerOpened=!e.playerOpened}),zt.on("click",function(t){se.togglePlayback()}),zt.find(".hap-btn-play").show(),ct.hasClass("hap-fixed-inited")||(ct.addClass("hap-fixed-inited"),setTimeout(function(){e.playerOpened?(e.playlistOpened?ct.css({bottom:"0px"}):ct.css({bottom:-yt.height()+"px"}),Vt.find(".hap-btn-player-close").show()):(e.playlistOpened=!1,ct.css({bottom:-ct.height()+"px"}),Vt.find(".hap-btn-player-open").show(),0<di&&Ha&&zt.show())},20)))}e=t.extend(!0,{},{volume_slider_js:microjob.childdir+"/assets/js/volume_slider.js",mediaId:null,mediaTitle:null,resumeTime:null,sourcePath:"",instanceName:"",queryInstance:"",playlistItemContent:"",playlistTitleOrder:"title,artist",statisticsContent:"plays,likes,downloads",audioFormatOrder:"aac,wav,mp3,flac,path",dataInterval:250,volume:.5,activeItem:0,numberTitleSeparator:".&nbsp;",artistTitleSeparator:"&nbsp;-&nbsp;",useNumbersInPlaylist:!1,preload:"auto",autoPlay:!1,loopState:"playlist",addResizeEvent:!0,addPlaylistEvents:!0,sortableTracksSet:!1,randomPlay:!1,usePlaylist:!0,usePlaylistScroll:!1,useKeyboardNavigationForPlayback:!1,togglePlaybackOnMultipleInstances:!0,useTitleScroll:!1,titleScrollSpeed:1,titleScrollSeparator:" *** ",continousKey:"hap-continous-key",useMediaSession:!0,createDownloadIconsInPlaylist:!1,createLinkIconsInPlaylist:!1,useShare:!0,linkIconTitle:"Purchase",downloadIconTitle:"Download",tooltipStatPlays:"Plays",tooltipStatLikes:"Likes",tooltipStatDownloads:"Downloads",artworkSize:[100,200,250,340,460,600],soundCloudThumbQuality:"t300x300.jpg",playbackRateMin:.5,playbackRateMax:2,sortOrder:"",getId3Image:!0,playlistItemMultilineWidth:600,searchDescriptionInPlaylist:!0,hideYoutubeAfterStart:!1,getRadioArtwork:!0,defaultSongArtist:"DATA NOT AVAILABLE",defaultSongTitle:"DATA NOT AVAILABLE",lastPlayedInterval:1e4,enableCors:!0,cors:"https://kastproxy-us.herokuapp.com/,https://kastproxy-eu.herokuapp.com/,https://cors-anywhere.herokuapp.com/,https://cors.io/?",useCorsForAudio:!1,seekTime:10,paginationPreviousBtnTitle:"Previous",paginationPreviousBtnText:"Prev",paginationNextBtnTitle:"Next",paginationNextBtnText:"Next",whatsAppWarning:"Please share this content on mobile device!",downloadIcon:"<svg viewBox='0 0 512 512'><path d='M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z'></path></svg>",linkIcon:"<svg viewBox='0 0 576 512'><path d='M504.717 320H211.572l6.545 32h268.418c15.401 0 26.816 14.301 23.403 29.319l-5.517 24.276C523.112 414.668 536 433.828 536 456c0 31.202-25.519 56.444-56.824 55.994-29.823-.429-54.35-24.631-55.155-54.447-.44-16.287 6.085-31.049 16.803-41.548H231.176C241.553 426.165 248 440.326 248 456c0 31.813-26.528 57.431-58.67 55.938-28.54-1.325-51.751-24.385-53.251-52.917-1.158-22.034 10.436-41.455 28.051-51.586L93.883 64H24C10.745 64 0 53.255 0 40V24C0 10.745 10.745 0 24 0h102.529c11.401 0 21.228 8.021 23.513 19.19L159.208 64H551.99c15.401 0 26.816 14.301 23.403 29.319l-47.273 208C525.637 312.246 515.923 320 504.717 320zM408 168h-48v-40c0-8.837-7.163-16-16-16h-16c-8.837 0-16 7.163-16 16v40h-48c-8.837 0-16 7.163-16 16v16c0 8.837 7.163 16 16 16h48v40c0 8.837 7.163 16 16 16h16c8.837 0 16-7.163 16-16v-40h48c8.837 0 16-7.163 16-16v-16c0-8.837-7.163-16-16-16z'></path></svg>",statDownloadIcon:"<svg viewBox='0 0 512 512'><path d='M504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zM212 140v116h-70.9c-10.7 0-16.1 13-8.5 20.5l114.9 114.3c4.7 4.7 12.2 4.7 16.9 0l114.9-114.3c7.6-7.6 2.2-20.5-8.5-20.5H300V140c0-6.6-5.4-12-12-12h-64c-6.6 0-12 5.4-12 12z'></path></svg>",statLikeIcon:"<svg viewBox='0 0 512 512'><path d='M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z'></path></svg>",statPlayIcon:"<svg viewBox='0 0 512 512'><path d='M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z'></path></svg>"},e);var et=HAPUtils.getUrlParameter(),at=[],it=[];if(decodeURIComponent(et["hap-query-instance"])==e.instanceName&&(Object.keys(et).forEach(function(t){if(0==t.indexOf("hap-")){var a=t.substr(4).replace(/-([a-z])/g,function(t){return t[1].toUpperCase()});(t=decodeURIComponent(et[t]).replace(/\+/g," "))&&(e.hasOwnProperty(a)?("true"===t?t=!0:"false"===t&&(t=!1),e[a]=t):(t=t.split(",").map(function(t){return t.trim()}),at.push({key:a,value:t})))}}),at.length)){var nt,ot,rt=at.length,lt=at[0].value.length;for(ot=0;ot<lt;ot++){var st={};for(nt=0;nt<rt;nt++){var dt=at[nt],pt=dt.value[ot];"true"===pt?pt=!0:"false"===pt&&(pt=!1),st[dt.key]=pt,"type"===dt.key&&(st.origtype=pt)}it.push(st)}}et=null;var ct=t(this).css("display","block");e.playerMarkup&&ct.append(e.playerMarkup);var ut=ct.find(".hap-player-outer");e.hidePlayerUntilMusicStart&&ut.addClass("hap-music-player-force-hidden");var ht="";if(null!=ct.attr("class")&&(ht=ct.attr("class").split(/\s+/)),e.customClass)if(-1<e.customClass.indexOf("|")){var ft=e.customClass.split(",");for(rt=ft.length,nt=0;nt<rt;nt++){var mt=ft[nt].split("|");ct.find(mt[0]).addClass(mt[1])}}else ct.addClass(e.customClass);e.markup&&ct.append(e.markup);var gt=t(e.playlistList),yt=ct.find(".hap-playlist-holder"),vt=ct.find(".hap-playlist-inner"),bt=ct.find(".hap-playlist-content"),Pt=ct.find(".hap-playlist-filter-msg"),wt=ct.find(".hap-sort-alpha"),kt=ct.find(".hap-popup-toggle"),At=ct.find(".hap-progress-bg"),Tt=ct.find(".hap-load-level"),It=ct.find(".hap-progress-level"),St=ct.find(".hap-volume-toggle");ct.find(".hap-volume-seekbar"),ct.find(".hap-volume-bg"),ct.find(".hap-volume-level");var xt=ct.find(".hap-player-holder"),Ct=ct.find(".hap-player-thumb").attr("role","img"),_t=ct.find(".hap-share-holder"),Et=ct.find(".hap-playback-rate-holder"),Mt=ct.find(".hap-player-title"),Ht=ct.find(".hap-player-artist"),Nt=ct.find(".hap-media-time-current"),Ot=ct.find(".hap-media-time-total"),Ut=ct.find(".hap-media-time-ad"),Dt=ct.find(".hap-playback-toggle"),Rt=ct.find(".hap-loop-toggle"),Lt=ct.find(".hap-random-toggle"),jt=ct.find(".hap-range-toggle"),Bt=ct.find(".hap-playback-rate-toggle"),qt=ct.find(".hap-share-toggle"),Wt=ct.find(".hap-preloader"),zt=ct.find(".hap-playback-toggle-ex"),Vt=ct.find(".hap-player-toggle-ex"),Ft=HAPUtils.isMobile(),Yt=HAPUtils.hasLocalStorage(),Gt=e.autoPlay,Xt=Gt,$t=e.volume,Qt=e.playlistItemContent.replace(/\s+/g,"").split(","),Kt=e.playlistTitleOrder.replace(/\s+/g,"").split(","),Jt=e.statisticsContent.replace(/\s+/g,"").split(","),Zt=e.useContinousPlayback&&Yt,te=Zt&&e.continousPlaybackTrackAllSongs,ee=e.useMediaSession&&"mediaSession"in navigator&&"file:"!=window.location.protocol,ae=e.useGa&&e.gaTrackingId,ie=e.sortOrder,ne=e.audioFormatOrder.split(",").map(function(t){return t.trim()}),oe=e.fetchPlayerArtwork&&Ct.length;e.playlistContent&&(bt=t(e.playlistContent));var re,le,se=this;t("body");var de,pe=t(window),ce=t(document),ue=HAPUtils.hasDownloadSupport(),he=HAPUtils.isIOS();HAPUtils.isAndroid();var fe=HAPUtils.canPlayMp3(),me=HAPUtils.canPlayWav(),ge=HAPUtils.canPlayAac(),ye=HAPUtils.canPlayFlac();HAPUtils.isChrome(),HAPUtils.isSafari();var ve,be,Pe,we,ke,Ae,Te,Ie,Se,xe,Ce,_e,Ee,Me,He,Ne,Oe,Ue,De,Re,Le,je,Be,qe,We,ze,Ve,Fe,Ye,Ge,Xe,$e,Qe,Ke,Je,Ze,ta,ea,aa,ia,na,oa,ra,la,sa,da,pa,ca,ua,ha,fa,ma,ya,va,ba,Pa,wa,ka,Aa,Ta,Ia,Sa,xa,Ca,_a,Ea,Ma,Ha,Na,Oa,Ua,Da,Ra,La,ja,Ba,qa,Wa,za,Va,Fa,Ya,Ga,Xa,$a=microjob.childdir+"/includes/ba-simple-proxy.php",Qa=["playlist","single","off"],Ka=Qa.indexOf(e.loopState),Ja=["audio","hls","shoutcast","icecast","radiojar"],Za="audio youtube_single hls shoutcast icecast radiojar".split(" "),ti=[],ei=t(document.createElement("audio")).attr("preload",e.preload),ai=ei[0],ii=[],ni=-1,oi=[],ri=[],li=[],si=[],di=0,pi=!1,ci=e.dataInterval,ui=HAPUtils.getEvents(),hi=[];if(za&&(e.usePlaylist=!0),e.placeHolderThumb){Ct.css("opacity",0),setTimeout(function(){Ct.css("backgroundImage","url("+e.placeHolderThumb+")").css("opacity",1)},300);var fi=!0}-1==Qt.indexOf("description")&&(e.searchDescriptionInPlaylist=!1),void 0===window.hap_mediaArr&&(window.hap_mediaArr=[]),window.hap_mediaArr.push({inst:se,id:e.instanceName}),Ft&&(Gt=!1),-1==Ka&&(e.loopState="off"),Ka=Qa.indexOf(e.loopState),Rt.find(".hap-btn-loop-"+e.loopState).show(),e.randomPlay?Lt.find(".hap-btn-random-on").show():Lt.find(".hap-btn-random-off").show(),e.playlistSelector&&t(e.playlistSelector).on("change",function(){se.loadPlaylist(t(this).val())}),e.breakPointArr&&"string"==typeof e.breakPointArr&&(e.breakPointArr=e.breakPointArr.split(","),HAPUtils.sortNumericArray(e.breakPointArr)),0==bt.length&&(e.usePlaylist=!1,e.usePlaylistScroll=!1,e.useNumbersInPlaylist=!1),St.find(".hap-btn-volume-up").show(),wt.find(".hap-btn-sort-alpha-down").show(),Dt.find(".hap-btn-play").show(),e.sortableTracks&&!e.sortableTracksSet&&("function"==typeof t.fn.sortable?(bt.sortable({items:".hap-playlist-item:not(.ui-draggable-handle)",handle:".hap-playlist-item-content",revert:!1,update:function(t,e){if(Ea){var a=Ea.closest(".hap-playlist-item").index();Ti.reSetCounter(a)}H(!0)}}),e.sortableTracksSet=!0):console.log("Using sortable tracks requires link to jquery-ui.js and jquery.ui.touch-punch.js in head tag"));var mi,gi=ct.find(".hap-load-more-btn").on("click",function(){if(!re||Be)return!1;We?se.loadMore():Ce&&Q(),gi.css("opacity",0)});e.useTitleScroll&&("undefined"==typeof HAPTextScroller?console.log("link to textscroller.js file missing in head tag"):mi=new HAPTextScroller({settings:e,mask:ct.find(".hap-media-title-mask"),container:ct.find(".hap-media-title")}));var yi=e.searchSelector?t(e.searchSelector):ct.find(".hap-search-filter");yi.on("keyup",function(){if(0==di)return!1;var a,i=t(this).val().toLowerCase(),n=0;for(a=0;a<di;a++){var o=bt.children(".hap-playlist-item").eq(a),r=o.find(".hap-playlist-title").length?o.find(".hap-playlist-title").html().toLowerCase():"";e.searchDescriptionInPlaylist&&o.find(".hap-playlist-description").length&&(r+=o.find(".hap-playlist-description").html().toLowerCase()),-1<r.indexOf(i)?o.show():(o.hide(),n++)}n==di?Pt.show():Pt.hide()}),e.useShare&&"undefined"!=typeof HAPShareManager&&(Je=new HAPShareManager(e));var vi,bi,Pi,wi,ki,Ai,Ti=new HAPPlaylistManager({loop:e.loopState,random:e.randomPlay});t(Ti).on("HAPPlaylistManager.COUNTER_READY",function(i,n){if(Ha&&W(),Da=oi[Oa=n].data,console.log(Da,e.instanceName),"youtube_single"==(Ha=Da.type)&&(Ha="youtube"),Ua)Ua=!1;else{if("shoutcast"==Ha||"icecast"==Ha||"radiojar"==Ha||"hls"==Ha?(jt.hide(),Ci.hide(),Nt.hide(),Ot.hide(),"hls"==Ha&&Y()):(jt.show(),Ci.show(),Nt.show(),Ot.show(),Y(),ee&&r()),te&&e.lastPositionArr){var o,l=e.lastPositionArr.length;for(o=0;o<l;o++){var s=e.lastPositionArr[o];if(s.title&&Da.title==s.title&&Da.artist==s.artist){Da.start=s.start;break}}}!function(a){if(Ea&&g(),(Ea=bt.children(".hap-playlist-item").eq(a)).length){if(Ea.addClass("hap-playlist-item-selected hap-playlist-item-disabled"),e.usePlaylistScroll&&0<di){if(!ca)if("undefined"!=typeof mCustomScrollbar)setTimeout(function(){"horizontal"==e.playlistScrollOrientation?vt.mCustomScrollbar("scrollTo",parseInt(Ea.position().left),{scrollInertia:500}):vt.mCustomScrollbar("scrollTo",parseInt(Ea.position().top),{scrollInertia:500})},1e3);else var i=setInterval(function(){"undefined"!=typeof mCustomScrollbar&&(clearInterval(i),"horizontal"==e.playlistScrollOrientation?vt.mCustomScrollbar("scrollTo",parseInt(Ea.position().left),{scrollInertia:500}):vt.mCustomScrollbar("scrollTo",parseInt(Ea.position().top),{scrollInertia:500}))},100);ca=!1}t(se).trigger("playlistItemDisabled",{instance:se,instanceName:e.instanceName,item:Ea})}}(Oa),Da.thumb||Da.thumbDefault||!oe||function(){var a=Da.title||"";a="https://itunes.apple.com/search?type=jsonp&term=="+encodeURI(Da.artist||"")+"-"+encodeURI(a)+"&media=music&limit=1",t.ajax({url:a,dataType:"jsonp"}).done(function(t){if(t.results[0]&&t.results[0].artworkUrl100){var a=Ct.width();a=HAPUtils.closestNumber(e.artworkSize,a),t=t.results[0].artworkUrl100.replace("100x100",a+"x"+a),oi[Oa].data.thumb=t,G(t)}}).fail(function(t,e,a){console.log(t,e,a)})}(),(Da.adPre||Da.adMid||Da.adEnd)&&(Qe?Qe.setAdData(Da):("undefined"==typeof HAPAdManager&&console.log("link to admanager.js file missing in head tag!"),Qe=new HAPAdManager(e,se,Da,$t,ai,It,Ut,ja),t(Qe).on("HAPAdManager.IOS_ADMID_FIX_START",function(t,e){Ke=!0}).on("HAPAdManager.ADPRE_PLAY",function(t,e){It.addClass("hap-ad-progress-level"),Nt.hide(),Ot.hide(),Ut.show()}).on("HAPAdManager.ADPRE_ENDED",function(t,e){It.removeClass("hap-ad-progress-level"),Ut.hide(),"shoutcast"!=Ha&&"icecast"!=Ha&&"radiojar"!=Ha&&(Nt.show(),Ot.show()),"youtube"==Ha?a():D()}).on("HAPAdManager.ADMID_PLAY",function(t,e){se.pauseMedia(),It.addClass("hap-ad-progress-level"),Nt.hide(),Ot.hide(),Ut.show()}).on("HAPAdManager.ADMID_ENDED",function(t,e){It.removeClass("hap-ad-progress-level"),Ut.hide(),"shoutcast"!=Ha&&"icecast"!=Ha&&"radiojar"!=Ha&&(Nt.show(),Ot.show()),se.playMedia()}).on("HAPAdManager.ADEND_PLAY",function(t,e){It.addClass("hap-ad-progress-level"),Nt.hide(),Ot.hide(),Ut.show()}).on("HAPAdManager.ADEND_ENDED",function(t,e){It.removeClass("hap-ad-progress-level"),Ut.hide(),"shoutcast"!=Ha&&"icecast"!=Ha&&"radiojar"!=Ha&&(Nt.show(),Ot.hide()),q(!0)}))),Da.adPre?(Qe.initAdPre(),Gt=!0,ai.volume=$t,void 0!==(o=ai.play())&&o.then(function(){}).catch(function(t){})):"youtube"==Ha?(a(),e.hidePlayerUntilMusicStart&&Z()):D()}}).on("HAPPlaylistManager.PLAYLIST_END",function(){t(se).trigger("playlistEnd",{instance:se,instanceName:e.instanceName})}),window.onYouTubeIframeAPIReady=function(){},ae&&(window.ga||(vi=window,bi=document,Pi="script",wi="ga",vi.GoogleAnalyticsObject=wi,vi.ga=vi.ga||function(){(vi.ga.q=vi.ga.q||[]).push(arguments)},vi.ga.l=1*new Date,ki=bi.createElement(Pi),Ai=bi.getElementsByTagName(Pi)[0],ki.async=1,ki.src="https://www.google-analytics.com/analytics.js",Ai.parentNode.insertBefore(ki,Ai)),ga("create",e.gaTrackingId,"auto"),ga("send","pageview"),ct.on("click",".hap-download",function(a){if(!re)return!1;window.ga&&(a=t(this).closest(".hap-playlist-item").find(".hap-playlist-title").html(),ga("send",{hitType:"event",eventCategory:"Modern audio player: "+e.instanceName,eventAction:"downloaded",eventLabel:"title: "+a,nonInteraction:!0}))})),Zt?(window.attachEvent||window.addEventListener)(he?"pagehide":"beforeunload",function(t){if(window.event&&(window.event.cancelBubble=!0),!re||!Ha)return!1;if(t={activePlaylist:e.activePlaylist,volume:$t,activeItem:Ti.getCounter(),resumeTime:se.getCurrentTime(),autoPlay:pi},te){var a,i=[];for(a=0;a<di;a++){var n=oi[a].data;n.start&&i.push({title:n.title,artist:n.artist,start:n.start})}t.lastPositionArr=i}localStorage.setItem(e.continousKey,JSON.stringify(t))}):localStorage.removeItem(e.continousKey),ee&&(navigator.mediaSession.setActionHandler("play",function(){se.playMedia()}),navigator.mediaSession.setActionHandler("pause",function(){se.pauseMedia()}),navigator.mediaSession.setActionHandler("previoustrack",function(){se.previousMedia()}),navigator.mediaSession.setActionHandler("nexttrack",function(){se.nextMedia()}),navigator.mediaSession.setActionHandler("seekbackward",function(){se.seekBackward()}),navigator.mediaSession.setActionHandler("seekforward",function(){se.seekForward()}));var Ii=ct.find(".hap-tooltip");Ft||(Ii.length&&"static"==ct.css("position")&&console.log("player css position is static, therefore tooltip might not work correctly. Please set wrapper css position to other than static if you use tooltip in player."),ct.on("mouseenter","[data-tooltip]",function(e){var a=t(this);e=ct[0].getBoundingClientRect();var i=a[0].getBoundingClientRect();Ii.text(a.attr("data-tooltip"));var n=parseInt(i.top-e.top-Ii.outerHeight());(a=parseInt(i.left-e.left-Ii.outerWidth()/2+a.outerWidth()/2))+Ii.outerWidth()>ct.width()?a=ct.width()-Ii.outerWidth():0>a&&(a=0),0>n+e.top&&(n=parseInt(i.top-e.top+Ii.outerHeight()+15)),Ii.css({left:a+"px",top:n+"px"}).show()}).on("mouseleave","[data-tooltip]",function(t){Ii.hide()}));var Si,xi=ct.find(".hap-circle-player").length;xi&&HAPUtils.hasCanvas()&&("undefined"==typeof HAPCirclePlayer?console.log("Link to circleplayer.js file missing in head tag!"):Si=new HAPCirclePlayer({settings:e,parent:ct}));var Ci=xi?ct.find(".hap-progress-canvas"):ct.find(".hap-seekbar");if(Ci.on(ui.downEvent,function(t){return!(e.disableSeekbarInRange&&Di||da||e.disableSongSkip||Qe&&Qe.isAdOn()||!Ha)&&(function(t){if(re){if(!La){if("touchstart"==t.type){if(!((t=t.originalEvent.touches)&&0<t.length))return!1}else t.preventDefault();La=!0,ce.on(ui.moveEvent,function(t){t:{if("touchmove"==t.type){if(t.originalEvent.touches&&t.originalEvent.touches.length)var e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;e=t.originalEvent.changedTouches}if(1<e.length)break t;e=e[0]}else e=t;t.preventDefault(),s(e)}}).on(ui.upEvent,function(t){t:if(La){if(La=!1,ce.off(ui.moveEvent).off(ui.upEvent),"touchend"==t.type){if(t.originalEvent.touches&&t.originalEvent.touches.length)var e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;e=t.originalEvent.changedTouches}if(1<e.length)break t;e=e[0]}else e=t;t.preventDefault(),s(e,!0),Ii.hide()}})}}}(t),!1)}),!Ft){var _i=function(){Ci.off(ui.moveEvent,d).off("mouseout",_i),ce.off("mouseout",_i),Ii.hide()};Ci.on("mouseover",function(){if(!La){if(Qe&&Qe.isAdOn())return!1;Ci.on(ui.moveEvent,d).on("mouseout",_i),ce.on("mouseout",_i)}})}if("undefined"==typeof HAPVolumeSlider){var Ei=document.createElement("script");Ei.type="text/javascript",Ei.src=HAPUtils.qualifyURL(e.sourcePath+e.volume_slider_js),Ei.onload=Ei.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||p()},Ei.onerror=function(){alert("Error loading "+this.src)},console.log(document.getElementsByTagName("script"));var Mi=document.getElementsByTagName("script")[0];Mi.parentNode.insertBefore(Ei,Mi)}else p();var Hi,Ni,Oi,Ui,Di,Ri,Li=ct.find(".hap-range-handle-a"),ji=ct.find(".hap-range-handle-b"),Bi=parseInt(Li.attr("data-width"),10),qi=parseInt(ji.attr("data-width"),10);if(se.toggleRange=function(){Ha&&(Di?(Li.css("display","none"),ji.css("display","none"),Ri=!0):(Li.css("display","block"),ji.css("display","block"),Oi=parseInt(Li.css("left"),10),Ui=parseInt(ji.css("left"),10),Hi=c(Oi),Ni=c(Ui),Ri=!1),(Di=!Di)?jt.addClass("hap-contr-btn-hover"):jt.removeClass("hap-contr-btn-hover"))},se.resetRange=function(){Di=!1,Ri=!0,Li.css({display:"none",left:"0px"}),ji.css({display:"none",left:ja+"px"}),jt.removeClass("hap-contr-btn-hover")},se.setRange=function(t,e){var a=se.getDuration();if(void 0===a)return!1;0>t&&(t=0),e>a&&(e=a),Hi=t,Ni=e,Ri=!1,Li.css("left",Hi/a*ja+"px"),ji.css("left",Ni/a*ja+"px"),Di||se.toggleRange()},se.getRange=function(){return void 0!==Hi&&void 0!==Ni?[Hi,Ni]:null},Li.length){var Wi=!0,zi=new HAPRangeSlider({settings:e,range_handle_a:Li,range_handle_b:ji});t(zi).on("HAPRangeSlider.RANGE_CHANGE",function(t,e){var a=e.point.pageX-At.offset().left,i=e.elem;0>a?a=0:a>ja&&(a=ja),i.hasClass("hap-range-handle-a")?(a>parseInt(ji.css("left"),10)-qi&&(a=parseInt(ji.css("left"),10)-Bi),Hi=c(Oi=a)):(a<parseInt(Li.css("left"),10)+Bi&&(a=parseInt(Li.css("left"),10)+Bi),Ni=c(Ui=a)),i.css("left",a+"px"),e.event?d(e.event):Ii.hide()})}var Vi=ct.find(".hap-playback-rate-seekbar");if(Vi.length){var Fi=new HAPPlaybackRateSlider({settings:e,wrapper:ct,seekbar:Vi,sliderBg:ct.find(".hap-playback-rate-bg"),sliderLevel:ct.find(".hap-playback-rate-level"),isVertical:Vi.hasClass("hap-vertical"),tooltip:Ii});t(Fi).on("HAPPlaybackRateSlider.RANGE_CHANGE",function(t,e){se.setPlaybackRate(e.value,!0)})}e.disableRightClickOverPlayer&&ct.on("contextmenu",function(){return!1}),e.useKeyboardNavigationForPlayback&&ce.off("keyup.hap").on("keydown.hap",function(e){if(!re)return!1;var a=e.keyCode,i=t(e.target);if(37==a)se.previousMedia();else if(39==a)se.nextMedia();else if(32==a){if(i.hasClass("hap-search-filter"))return!1;e.preventDefault(),se.togglePlayback()}else if(77==a){if(i.hasClass("hap-search-filter"))return!1;Ba&&Ba.toggleMute()}});var Yi=[ct.find(".hap-next-toggle"),ct.find(".hap-prev-toggle"),ct.find(".hap-skip-forward"),ct.find(".hap-skip-backward"),ct.find(".hap-playlist-toggle"),ct.find(".hap-playlist-close"),qt,ct.find(".hap-share-close"),ct.find(".hap-share-item"),ct.find(".hap-playback-rate-close"),Bt,jt,kt,wt,Dt,Rt,Lt];for(rt=Yi.length,nt=0;nt<rt;nt++)t(Yi[nt]).css("cursor","pointer").on("click",m);if(window.onbeforeunload=function(t){e.useStatistics&&Oa&&X("hap_play_count",Oa)},e.addResizeEvent&&pe.on("resize",function(){if(!re)return!1;de&&clearTimeout(de),de=setTimeout(F,150)}),this.getTitle=function(t,a){if(t.artist&&!HAPUtils.isEmpty(t.artist)&&t.title&&!HAPUtils.isEmpty(t.title))var i=a?t.artist+" - "+t.title:t.artist+e.artistTitleSeparator+t.title;else t.title&&!HAPUtils.isEmpty(t.title)?i=t.title:t.artist&&!HAPUtils.isEmpty(t.artist)&&(i=t.artist);return i},e.useStatistics&&(ct.on("click",".hap-like-count",function(e){if(!re||!Ha)return!1;X("hap_like_count",t(this).closest(".hap-playlist-item").attr("data-id"))}),ct.on("click",".hap-download-count:not(.hap-no-download)",function(e){if(!re||!Ha)return!1;X("hap_download_count",t(this).closest(".hap-playlist-item").attr("data-id"))})),this.playMedia=function(){if(!re||!Ha||pi)return!1;if("youtube"==Ha)aa&&na&&aa.playVideo();else if(ai){"shoutcast"!=Ha&&"icecast"!=Ha&&"radiojar"!=Ha||ai.load();var t=ai.play();void 0!==t&&t.then(function(){}).catch(function(t){})}},this.pauseMedia=function(){if(!re||!Ha||!pi)return!1;"youtube"==Ha?aa&&na&&aa.pauseVideo():ai&&ai.pause()},this.togglePlayback=function(){if(!re||!Ha)return!1;if(Qe&&Qe.clearAdMidTimeout(),Qe&&Qe.isAdMidOn())Qe.toggleAdMidAudio();else if("youtube"==Ha){if(aa&&na){var t=aa.getPlayerState();1==t?aa.pauseVideo():2==t?aa.playVideo():(-1==t||5==t||0==t)&&aa.playVideo()}}else ai&&(ai.paused?("shoutcast"!=Ha&&"icecast"!=Ha&&"radiojar"!=Ha||ai.load(),void 0!==(t=ai.play())&&t.then(function(){Qe&&Qe.isAdPreOn()&&(Dt.find(".hap-btn-play").hide(),Dt.find(".hap-btn-pause").show())}).catch(function(t){})):(ai.pause(),Qe&&Qe.isAdPreOn()&&(Dt.find(".hap-btn-play").show(),Dt.find(".hap-btn-pause").hide())))},this.nextMedia=function(){if(!re)return!1;0!=di&&(V(),Ti.advanceHandler(1,!0))},this.previousMedia=function(){if(!re)return!1;0!=di&&(V(),Ti.advanceHandler(-1,!0))},this.loadMedia=function(t,e,a,i){if(!re||le)return!1;if(0!=di){var n=-1;if("title"==t){for(t=0;t<di;t++)if(e==oi[t].data.title){n=t;var o=!0;break}if(!o)return alert('No media with title "'+e+'" to load! LoadMedia failed.'),!1}else if("title-artist"==t){var r=bt.find('.hap-playlist-item[data-title="'+a+'"][data-artist="'+i+'"]');if(0==r.length)return alert('No media with title "'+a+'" and artist "'+i+'" to load! LoadMedia failed.'),!1;n=r.attr("data-id")}else if("counter"==t){if(0>e||e>di-1)return alert('Invalid track number. Track number  "'+e+'" doesnt exist. LoadMedia failed.'),!1;n=e}else if("id"==t){if(0==(r=bt.find(".hap-playlist-item[data-media-id="+e+"]")).length)return alert("No media with media ID "+e+" to load! LoadMedia failed."),!1;n=r.attr("data-id")}else{if("id-title"!=t)return console.log("loadMedia function requires format parameter!"),!1;if(a&&i?r=bt.find('.hap-playlist-item[data-media-id="'+e+'"][data-title="'+a+'"][data-artist="'+i+'"]'):a?r=bt.find('.hap-playlist-item[data-media-id="'+e+'"][data-title="'+a+'"]'):i&&(r=bt.find('.hap-playlist-item[data-media-id="'+e+'"][data-artist="'+i+'"]')),0==r.length)return alert("No media with media ID "+e+" to load! LoadMedia failed."),!1;n=r.attr("data-id")}V(),Gt=!0,Ti.processPlaylistRequest(n)}},this.loadMore=function(){if(console.log(qe),!re||!qe||!je||le)return!1;le=!0,Wt.show(),Be=!0,li=[],"soundcloud"==qe?C():"podcast"==qe?x():"folder"==qe?w():"youtube"==qe&&(ta||P("youtube"),ta.resumeLoad(je))},this.setLoadMore=function(t){We=t},this.endLoadMore=function(){le=!1,Wt.hide(),Be=!1},this.addMore=function(){if(!re||le)return!1;Ce&&(Be||Q())},this.setAddMore=function(t){Ce=t},this.loadPlaylist=function(t,a){return!(!re||le)&&("string"!=typeof t?(alert("Invalid value loadPlaylist!"),!1):(e.mediaId=a,e.activePlaylist!=t&&void y(t)))},this.addTrack=function(t,e,a,i){return!(!re||le)&&(void 0===t?(alert("addTrack method requires track parameter. AddTrack failed."),!1):(Ta=!1,void 0!==e&&(Ta=e,0==e&&(Ua=!0)),i?(Ia=!0,xa=!1):Ia=!1,Pt.hide(),ka=a,wa=!1,Aa=!0,Ca?void 0!==ka?0>ka?ka=0:(ka=di,wa=!0):(wa=!0,ka=di):(ka=0,wa=!0),le=!0,Wt.show(),ni=-1,li=[],si=[],Array.isArray(t)?si=t:si.push(t),di=si.length,Ca=bt,void(Ia?(li=si,E()):v())))},this.inputAudio=function(t){return!(!re||le)&&(void 0===t?(alert("inputAudio method requires data parameter. inputAudio failed."),!1):(Ea&&g(),0<di&&Ti.reSetCounter(),Da=t,Ha=t.type,-1==Ja.indexOf(Ha)?(alert("inputAudio method supports tracks that dont require processing: "+Ja),!1):("shoutcast"!=Ha&&"icecast"!=Ha&&"radiojar"!=Ha&&(Y(),ee&&r()),Gt=!0,void D())))},this.removeTrack=function(t,e){if(!re||le)return!1;if(0!=di){if("title"==t){var a;for(a=0;a<di;a++)if(e==oi[a].data.title){var i=bt.children(".hap-playlist-item").eq(a),n=!0;break}if(!n)return alert('Track with title "'+e+'" doesnt exist. RemoveTrack failed.'),!1}else if("counter"==t){if(0>(e=parseInt(e,10))||e>di-1)return alert('Track number  "'+e+'" doesnt exist. RemoveTrack failed.'),!1;i=bt.find(".hap-playlist-item").eq(e)}else{if("id"!=t)return alert("removeTrack method failed."),!1;if(0==(i=bt.find(".hap-playlist-item[data-media-id="+e+"]")).length)return alert('Track with media id "'+e+'" doesnt exist. RemoveTrack failed.'),!1}i.remove(),oi.splice(parseInt(i.attr("data-id"),10),1),H(!0),0<di?e==(i=Ti.getCounter())?(W(),Ti.setPlaylistItems(di)):(Ti.setPlaylistItems(di,!1),e<i&&Ti.reSetCounter(Ti.getCounter()-1)):z()}},this.sort=function(e){if(!re||3>di)return!1;if(void 0===e)return console.log("Sort method requires order parameter. Sort method failed."),!1;if(ie==i)return!1;var a=bt.children(".hap-playlist-item"),i=e.toLowerCase();if("title-asc"==i){var n;for(HAPUtils.keysrt2(oi,"data","title"),e=[],n=0;n<di;n++)e.push(oi[n].id);wt.find(".hap-btn-sort-alpha-up").hide(),wt.find(".hap-btn-sort-alpha-down").show()}else if("title-desc"==i){for(HAPUtils.keysrt2(oi,"data","title",!0),e=[],n=0;n<di;n++)e.push(oi[n].id);wt.find(".hap-btn-sort-alpha-up").show(),wt.find(".hap-btn-sort-alpha-down").hide()}else{if("random"!=i)return void console.log("Unknown sort order. Sort method failed.");e=HAPUtils.randomiseArray(di),oi=HAPUtils.sortArray(oi,e)}ie=i,i=Oa,bt.append(t.map(e,function(t){return a[t]})),-1!=i&&(i=bt.children(".hap-playlist-item[data-id='"+i+"']").index(),Ti.reSetCounter(i)),H(!0)},this.destroyInstance=function(){z(),W(),e.usePlaylistScroll&&(vt.mCustomScrollbar("destroy"),pa=!1)},this.destroyInstance2=function(){W(),e.usePlaylistScroll&&(vt.mCustomScrollbar("destroy"),pa=!1),e.sortableTracks&&e.sortableTracksSet&&(bt.sortable("destroy"),e.sortableTracksSet=!1)},this.destroyMedia=function(){if(!re)return!1;re&&Ha&&(Ea&&g(),W(),Ti.reSetCounter())},this.destroyPlaylist=function(){if(!re)return!1;z()},this.setPlaybackRate=function(t,e){if(!re||!Ha)return!1;Da.playbackRate=t,ma&&(ma=t),"youtube"==Ha?aa.setPlaybackRate(t):ai&&(ai.playbackRate=t),e||Fi&&Fi.setVisual(t)},this.toggleRandom=function(t){if(!re||void 0===Ti)return!1;e.randomPlay=void 0!==t?t:!e.randomPlay,Ti.setRandom(e.randomPlay),Lt.find(".hap-btn").hide(),e.randomPlay?Lt.find(".hap-btn-random-on").show():Lt.find(".hap-btn-random-off").show()},this.setLoop=function(t){if(!re||void 0===Ti)return!1;Rt.find(".hap-btn").hide(),e.loopState=t,Ka=Qa.indexOf(e.loopState),Rt.find(".hap-btn-loop-"+e.loopState).show(),Ti.setLooping(e.loopState)},this.getVolume=function(){return $t},this.setVolume=function(t){if(!re)return!1;0>t?t=0:1<t&&(t=1),Ba&&Ba.setVolume(t)},this.toggleMute=function(){if(!re)return!1;Ba&&Ba.toggleMute()},this.setAutoPlay=function(t){Gt=t},this.disableSeek=function(t){da=t},this.seek=function(t){if(!re||!Ha)return!1;if("youtube"==Ha)aa&&na&&aa.seekTo(t);else if("audio"==Ha&&ai)try{ai.currentTime=t}catch(t){console.log(t)}},this.seekBackward=function(t){if(!re||!Ha)return!1;if("youtube"==Ha)aa&&na&&(t=Math.max(aa.getCurrentTime()-(t||seekTime),0),aa.seekTo(t));else if("audio"==Ha&&ai)try{ai.currentTime=Math.max(ai.currentTime-(t||seekTime),0)}catch(t){console.log(t)}},this.seekForward=function(t){if(!re||!Ha)return!1;if("youtube"==Ha)aa&&na&&(t=Math.min(aa.getCurrentTime()+(t||seekTime),aa.getDuration()),aa.seekTo(t));else if("audio"==Ha&&ai)try{ai.currentTime=Math.min(ai.currentTime+(t||seekTime),ai.duration)}catch(t){console.log(t)}},this.getCurrentMediaUrl=function(){if(!re)return!1;if(!Ha)return"";var t=-1==window.location.href.indexOf("?")?"?":"&",a="hap-query-instance="+encodeURIComponent(e.instanceName);return t=t+a+"&hap-scroll-to-player=1"+(null!=Da.mediaId?"&hap-media-id="+Da.mediaId:"&hap-active-item="+Oa)+(Ma?"&hap-resume-time="+Math.floor(se.getCurrentTime()):""),null!=Da.mediaId&&-1==Za.indexOf(Da.origtype)&&Da.safeTitle&&(t+=a="&hap-media-title="+encodeURIComponent(Da.safeTitle)),t},this.getCurrentTime=function(){return"youtube"==Ha?aa&&na?aa.getCurrentTime():0:"audio"!=Ha?0:ai?ai.currentTime:void 0},this.getDuration=function(){if(!re||!Ha)return!1;if("youtube"==Ha){if(aa&&na)return aa.getDuration()}else if("audio"==Ha&&ai)return ai.duration},this.destroyPlaylistScroll=function(){if(!re)return!1;e.usePlaylistScroll&&(vt.mCustomScrollbar("destroy"),pa=!1)},this.getSetupDone=function(){return re},this.getMediaPlaying=function(){return!!re&&pi},this.getPlaylistLoading=function(){return le},this.getCounter=function(){return re?void 0!==Ti?Ti.getCounter():-1:null},this.getPlaylistContent=function(){return bt},this.getPlaylistData=function(){return oi},this.getLastPlaylistData=function(){return!!re&&ri},this.getPlaylistLength=function(){return!!re&&(HAPUtils.isNumber(di)?di:0)},this.getPlaylistList=function(){return gt},this.getSettings=function(){return e},this.getCurrMediaData=function(){return!!re&&Da},this.getWrapper=function(){return ct},this.getPlaylistItems=function(){if(!re)return!1;var e=[];return bt.find(".hap-playlist-item").each(function(){e.push(t(this))}),e},this.openPopup=function(){if(!re||e.isPopup)return!1;hapOpenPopup(e,se)},this.togglePlaylist=function(){if(-1<ht.indexOf("hap-art-narrow-light")||-1<ht.indexOf("hap-art-narrow-dark"))e.playlistOpened?(xt.stop().animate({left:"0px"},{duration:350}),yt.stop().animate({left:-xt.width()+"px"},{duration:350})):(xt.stop().animate({left:xt.width()+"px"},{duration:350}),yt.stop().animate({left:"0px"},{duration:350}));else if(-1<ht.indexOf("hap-art-wide-light")||-1<ht.indexOf("hap-art-wide-dark")||-1<ht.indexOf("hap-brona-light")||-1<ht.indexOf("hap-brona-dark"))if(e.playlistOpened)yt.stop().animate({height:"0px"},{duration:350});else{var a=yt.css("height","auto").height();yt.height(0).stop().animate({height:a+"px"},{duration:350,complete:function(){t(this).height("auto")}})}else-1<ht.indexOf("hap-wall")?e.playlistOpened?yt.css("left","-20000px"):yt.css("left",0):-1<ht.indexOf("hap-classic")?e.playlistOpened?yt.slideUp():yt.slideDown():-1<ht.indexOf("hap-fixed")&&(e.playlistOpened?ct.stop().animate({bottom:-yt.height()+"px"},{duration:350}):ct.stop().animate({bottom:"0px"},{duration:350}));e.playlistOpened=!e.playlistOpened},Yt&&e.continousKey)if(Zt){if(localStorage.getItem(e.continousKey)){var Gi=JSON.parse(localStorage.getItem(e.continousKey));e.activePlaylist=Gi.activePlaylist,e.resumeTime=Gi.resumeTime,e.volume=Gi.volume,e.activeItem=Gi.activeItem,Gt=e.autoPlay=Gi.autoPlay,e.lastPositionArr=Gi.lastPositionArr,localStorage.removeItem(e.continousKey)}}else localStorage.removeItem(e.continousKey);return setTimeout(function(){if(e.isPopup&&e.copyCurrentPlaylistToPopup){if(oi=e.playlistDataArr,di=oi.length,Ti.setPlaylistItems(di,!1),e.useStatistics){var a;if(!e.usePlaylist)for(a=0;a<di;a++)oi[a].data.hapStatsSet=!1;N()}var i;if(Ca=bt,e.usePlaylist&&e.addPlaylistEvents)bt.find(".hap-playlist-item").each(function(){i=t(this).find(".hap-playlist-item-content").on("click",u),Ft||i.on("mouseenter",h).on("mouseleave",f)});O()}else it.length?(le=!0,Wt.show(),t(se).trigger("playlistStartLoad",{instance:se,instanceName:e.instanceName}),di=(si=it).length,v()):e.activePlaylist&&!HAPUtils.isEmpty(e.activePlaylist)?y(e.activePlaylist):O()},50),this}}(jQuery);var hap_popup_window,hap_player_instance,hap_player_auto_instance,hasLocalStorage=HAPUtils.hasLocalStorage();function hapOpenPopup(t,e){if(!hasLocalStorage||!localStorage.getItem("hap_popup")){hap_player_instance=e;var a=t.popupUrl||t.sourcePath+"popup.html?rand="+99999999*Math.random(),i=t.popupWidth||hap_player_instance.width(),n=t.popupHeight||hap_player_instance.height(),o=(window.screen.width-parseInt(i,10))/2,r=(window.screen.height-parseInt(n,10))/2;if((!hap_popup_window||hap_popup_window.closed)&&!(hap_popup_window=window.open(a,"audio_player","menubar=no,toolbar=no,location=no,scrollbars=1,resizable,width="+i+",height="+n+",left="+o+",top="+r)))return alert("Player can not be opened in a popup window because your browser is blocking Pop-Ups. You need to allow Pop-Ups in browser for this site to use the Player."),!1}}function hapNotifyParent(){if(hap_popup_window&&null!=hap_popup_window.initPopup){if(hap_player_instance){var t=hap_player_instance.getSettings();t.volume=hap_player_instance.getVolume(),t.activePlaylist=t.activePlaylist,t.activeItem=hap_player_instance.getCounter(),t.resumeTime=hap_player_instance.getCurrentTime(),t.autoPlay=hap_player_instance.getMediaPlaying(),t.copyCurrentPlaylistToPopup?(t.playlistDataArr=hap_player_instance.getPlaylistData(),hap_player_instance.destroyInstance2()):hap_player_instance.destroyInstance();var e=hap_player_instance.getWrapper()}else hap_player_auto_instance&&((t=hap_player_auto_instance.settings).copyCurrentPlaylistToPopup=!1,e=hap_player_auto_instance.wrapper);var a=e.attr("id"),i=hapjq("#hap-inline-css").clone().wrap("<p>").parent().html(),n=hapjq("#hap-playlist-list").remove().wrap("<p>").parent().html();e=e.remove().wrap("<p>").parent().html();try{window[t.instanceName]=hap_popup_window.initPopup(e,a,t,i,n)}catch(t){return alert("initPopup error: "+t.message),!1}}}